---
title: React 中的样式问题
date: '2020-10-26'
draft: true
---

### 在 React 中如何使用 innerHTML?

`dangerouslySetInnerHTML` 属性是 React 用来替代在浏览器 DOM 中使用 `innerHTML`。与 `innerHTML` 一样，考虑到跨站脚本攻击（XSS），使用此属性也是有风险的。使用时，你只需传递以 `__html` 作为键，而 HTML 文本作为对应值的对象。

在本示例中 MyComponent 组件使用 `dangerouslySetInnerHTML` 属性来设置 HTML 标记：

```jsx
function createMarkup() {
  return { __html: 'First &middot; Second' };
}

function MyComponent() {
  return <div dangerouslySetInnerHTML={createMarkup()} />;
}
```

### 如何在 React 中使用样式?

`style` 属性接受含有 camelCased（驼峰）属性的 JavaScript 对象，而不是 CSS 字符串。这与 DOM 样式中的 JavaScript 属性一致，效率更高，并且可以防止 XSS 安全漏洞。

```jsx
const divStyle = {
  color: 'blue',
  backgroundImage: 'url(' + imgUrl + ')',
};

function HelloWorldComponent() {
  return <div style={divStyle}>Hello World!</div>;
}
```

为了与在 JavaScript 中访问 DOM 节点上的属性保持一致，样式键采用了 `camel-cased`（例如`node.style.backgroundImage`）。

### react 中的几种 css 形式

- css module `const sty = require('./style.css')` 每一个 className 都需要手动赋值
- import css 这个实际使用跟 link css 差不多，不需要再手动为 className 赋值

### 是否建议在 React 中使用 CSS In JS 技术?

React 对如何定义样式没有任何意见，但如果你是初学者，那么好的起点是像往常一样在单独的 \*.css 文件中定义样式，并使用类名引用它们。此功能不是 React 的一部分，而是来自第三方库。但是如果你想尝试不同的方法（JS 中的 CSS），那么 styled-components 库是一个不错的选择。

### 什么是 Styled Components?

styled-components 是一个用于样式化 React 应用程序的 JavaScript 库。 它删除了样式和组件之间的映射，并允许您在 js 中编写 CSS。

### 举一个 Styled Components 的例子?

让我们创建具有特定样式的`<Title>`和`<Wrapper>`组件。

```js
import React from 'react';
import styled from 'styled-components';

// Create a <Title> component that renders an <h1> which is centered, red and sized at 1.5em
const Title = styled.h1`
  font-size: 1.5em;
  text-align: center;
  color: palevioletred;
`;

// Create a <Wrapper> component that renders a <section> with some padding and a papayawhip background
const Wrapper = styled.section`
  padding: 4em;
  background: papayawhip;
`;
```

`Title`和`Wrapper`变量现在是可以像任何其他 react 组件一样渲染。

```jsx
<Wrapper>
  <Title>{'Lets start first styled component!'}</Title>
</Wrapper>
```

### 如何有条件地应用样式类?

你不应该在引号内使用大括号，因为它将被计算为字符串。

```jsx
<div className="btn-panel {this.props.visible ? 'show' : 'hidden'}">
```

相反，你需要将大括号移到外部（不要忘记在类名之间添加空格）：

```jsx
<div className={'btn-panel ' + (this.props.visible ? 'show' : 'hidden')}>
```

模板字符串也可以工作：

```jsx
<div className={`btn-panel ${this.props.visible ? 'show' : 'hidden'}`}>
```

### 如何合并多个内联的样式对象?

在 React 中，你可以使用扩展运算符:

```jsx
<button style={{ ...styles.panel.button, ...styles.panel.submitButton }}>{'Submit'}</button>
```

如果你使用的是 React Native，则可以使用数组表示法：

```jsx
<button style={[styles.panel.button, styles.panel.submitButton]}>{'Submit'}</button>
```

### 如何将 vendor prefixes 应用于 React 中的内联样式?

React 不会自动应用 _vendor prefixes_，你需要手动添加 _vendor prefixes_。

```jsx
<div
  style={{
    transform: 'rotate(90deg)',
    WebkitTransform: 'rotate(90deg)', // note the capital 'W' here
    msTransform: 'rotate(90deg)', // 'ms' is the only lowercase vendor prefix
  }}
/>
```

### 模块化样式文件有什么好处?

建议避免在组件中对样式值进行硬编码。任何可能在不同的 UI 组件之间使用的值都应该提取到它们自己的模块中。

例如，可以将这些样式提取到单独的组件中：

```js
export const colors = {
  white,
  black,
  blue,
};

export const space = [0, 8, 16, 32, 64];
```

然后在其他组件中单独导入：

```js
import { space, colors } from './styles';
```
