<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>创建一个任务型机器人 | yiliang blog</title>
    <meta name="description" content="开放腾讯核心智能对话系统技术，提供人机交互应用开发最佳体验">
    
    
    <link rel="preload" href="/document/assets/css/0.styles.2ba821d7.css" as="style"><link rel="preload" href="/document/assets/js/app.5ef7bbe5.js" as="script"><link rel="preload" href="/document/assets/js/2.87b3b906.js" as="script"><link rel="preload" href="/document/assets/js/10.0ab90938.js" as="script"><link rel="prefetch" href="/document/assets/js/11.ba749f2d.js"><link rel="prefetch" href="/document/assets/js/12.1c9a952b.js"><link rel="prefetch" href="/document/assets/js/3.ee0b81aa.js"><link rel="prefetch" href="/document/assets/js/4.328c7ac3.js"><link rel="prefetch" href="/document/assets/js/5.50d10a31.js"><link rel="prefetch" href="/document/assets/js/6.b4c4fd2b.js"><link rel="prefetch" href="/document/assets/js/7.1d0a726d.js"><link rel="prefetch" href="/document/assets/js/8.82ccd5f4.js"><link rel="prefetch" href="/document/assets/js/9.792878ee.js">
    <link rel="stylesheet" href="/document/assets/css/0.styles.2ba821d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/document/" class="home-link router-link-active"><img src="/document/assets/img/logo.jpg" alt="yiliang blog" class="logo"> <span class="site-name can-hide">yiliang blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/document/" class="nav-link">首页</a></div><div class="nav-item"><a href="/document/guide/" class="nav-link">引导</a></div><div class="nav-item"><a href="/document/sdk.html" class="nav-link">SDK</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/document/" class="nav-link">首页</a></div><div class="nav-item"><a href="/document/guide/" class="nav-link">引导</a></div><div class="nav-item"><a href="/document/sdk.html" class="nav-link">SDK</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/document/task/task-bot.html" class="active sidebar-link">创建一个任务型机器人</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/document/task/task-bot.html#_1-创建-bot" class="sidebar-link">1. 创建 Bot</a></li><li class="sidebar-sub-header"><a href="/document/task/task-bot.html#_2-配置-bot" class="sidebar-link">2. 配置 Bot</a></li><li class="sidebar-sub-header"><a href="/document/task/task-bot.html#_3-编译、测试和发布-bot" class="sidebar-link">3. 编译、测试和发布 Bot</a></li><li class="sidebar-sub-header"><a href="/document/task/task-bot.html#_4-接入-bot" class="sidebar-link">4. 接入 Bot</a></li></ul></li><li><a href="/document/qa/qa-bot.html" class="sidebar-link">创建一个 QA 问答型机器人</a></li><li><a href="/document/wxwork/access.html" class="sidebar-link">TBP 企业微信服务号接入指引</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="创建一个任务型机器人"><a href="#创建一个任务型机器人" class="header-anchor">#</a> 创建一个任务型机器人</h1> <p>下文以“差旅机器人”为例介绍 Bot 的创建、配置、发布和接入的全流程。</p> <h2 id="_1-创建-bot"><a href="#_1-创建-bot" class="header-anchor">#</a> 1. 创建 Bot</h2> <p>在 <a href="https://console.cloud.tencent.com/tbp" target="_blank" rel="noopener noreferrer">TBP 配置平台<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 主页面单击【新建 Bot】，在弹出的对话框中输入 Bot 标识名，例如：TravelBot，确定后即完成 Bot 创建：
<img src="https://main.qcloudimg.com/raw/73ab9b963d095a4b21726476bea07878.png" alt="img"> <img src="https://main.qcloudimg.com/raw/c393abfe18ccb30b60b2d0f53e7db6e1.png" alt="img"></p> <h2 id="_2-配置-bot"><a href="#_2-配置-bot" class="header-anchor">#</a> 2. 配置 Bot</h2> <p>单击 TravelBot 操作列的【配置】，进入 Bot 配置主界面，主要展示 Bot 相关的信息：
<img src="https://main.qcloudimg.com/raw/14036072f3b72817d95c957b08b5ca9c.png" alt="img"> <strong>新建与配置意图</strong>
切换至【意图管理】模块新建意图，以订机票的意图为例，单击操作列的【新建意图】，在弹出的对话框中输入意图标识名，例如：BookTicket，确定后即完成意图创建：
<img src="https://main.qcloudimg.com/raw/80ecd0059e5cd475c8b1329e3b38a22d.png" alt="img">
单击操作列的 BookTicket【配置】，进入意图的配置页面，包括【用户说法】、【槽位】、【服务实现】和【机器人自动回复】四个配置模块：
<img src="https://main.qcloudimg.com/raw/1ca4329357fb4098c6aa5f1d825e7ff8.png" alt="img">
逐一配置各个模块，例如：
a. <strong>用户说法</strong>
添加不带槽位和带槽位的用户说法：</p> <ul><li>我想订机票</li> <li>我要订 {DepartureTime} 的机票</li> <li>帮我订从 {DepartureCity} 到 {DestinationCity} 的机票</li></ul> <p>b. <strong>槽位</strong>
添加槽位并进行相关设置：</p> <table><thead><tr><th style="text-align:left;">槽位</th> <th style="text-align:left;">对应词典</th> <th style="text-align:left;">槽位是否必填</th> <th style="text-align:left;">追问话术</th></tr></thead> <tbody><tr><td style="text-align:left;">出发地 DepartureCity</td> <td style="text-align:left;">城市词典</td> <td style="text-align:left;">是</td> <td style="text-align:left;">请问您的出发地是哪个城市？</td></tr> <tr><td style="text-align:left;">目的地 DestinationCity</td> <td style="text-align:left;">城市词典</td> <td style="text-align:left;">是</td> <td style="text-align:left;">请问您的目的地是哪个城市？</td></tr> <tr><td style="text-align:left;">出发时间 DepartureTime</td> <td style="text-align:left;">时间词典</td> <td style="text-align:left;">是</td> <td style="text-align:left;">请问您想订什么时候的机票？</td></tr> <tr><td style="text-align:left;">机票舱位 TicketClass</td> <td style="text-align:left;">舱位词典</td> <td style="text-align:left;">否</td> <td style="text-align:left;">-</td></tr> <tr><td style="text-align:left;">机票数量 PersonNum</td> <td style="text-align:left;">数量</td> <td style="text-align:left;">否</td> <td style="text-align:left;">-</td></tr></tbody></table> <p>c. <strong>服务实现</strong>
服务实现方式选择 Web Service，并输入服务调用的 URL 地址。
d. <strong>机器人自动回复</strong>
因服务实现方式选择 Web Service，不允许设置。
意图配置完成后进行保存：
<img src="https://main.qcloudimg.com/raw/acce3677c3dcaec0e57d998a74d5b81d.png" alt="img"></p> <p><strong>新建和配置自定义词典</strong>
在配置意图的槽位时需要为各个槽位设置对应的词典，此时可在【槽位】配置模块选择词典时快速新建自定义词典，例如为槽位 TicketClass 新建一个包含各类舱位的自定义词典 ticket_class：
<img src="https://main.qcloudimg.com/raw/ecba2458c59485937f400b0aa5187593.png" alt="img">
也可先保存意图配置后，切换到【词典管理】模块新建自定义词典 ticket_class：
<img src="https://main.qcloudimg.com/raw/32e9a8babc1d0f5130aafa392225b8a8.png" alt="img"> <img src="https://main.qcloudimg.com/raw/eb973003eee95127b37c7bcc3ba2bed5.png" alt="img">
但无论通过哪种途径新建自定义词典，都需要在【词典管理】模块对自定义词典进行配置，添加词条。例如词典 ticket_class，有如下词条：</p> <table><thead><tr><th style="text-align:left;">词条序号</th> <th style="text-align:left;">标准词</th> <th style="text-align:left;">同义词</th></tr></thead> <tbody><tr><td style="text-align:left;">1</td> <td style="text-align:left;">经济舱</td> <td style="text-align:left;">普通舱</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">商务舱</td> <td style="text-align:left;">公务舱</td></tr> <tr><td style="text-align:left;">3</td> <td style="text-align:left;">头等舱</td> <td style="text-align:left;">豪华舱</td></tr></tbody></table> <p>则进入该词典的配置页面添加以上词条：
<img src="https://main.qcloudimg.com/raw/b889cfbceba38bb61321801b657cc8a9.png" alt="img"> <strong>引用内置词典</strong>
槽位对应的词典除了可以选择自定义词典之外，还可以引用平台提供的内置词典。引用内置词典同样有类似新建自定义词典的两种途径，例如在【槽位】配置模块为槽位 DestinationCity 引用包含所有城市名的内置词典 T.loc_city：
<img src="https://main.qcloudimg.com/raw/11131da184940a611d3cb254b3bf9db3.png" alt="img">
或先保存意图配置，后切换到【词典管理】模块引用内置词典 T.loc_city：
<img src="https://main.qcloudimg.com/raw/f0814e9f77ea1acd8b2139cf44a88da9.png" alt="img"></p> <h2 id="_3-编译、测试和发布-bot"><a href="#_3-编译、测试和发布-bot" class="header-anchor">#</a> 3. 编译、测试和发布 Bot</h2> <p>意图和词典配置无误后，需先对 Bot 进行编译才可以测试与发布。
<strong>编译 Bot</strong>
在 Bot 配置的任意页面单击【编译】都可以对 Bot 进行编译，编译过程中不允许更改 Bot 的配置和测试 Bot，例如此时 TravelBot 正在编译中：
<img src="https://main.qcloudimg.com/raw/3f35bd5dbe299ae6d6dac66f375e707a.png" alt="img">
每次 Bot 编译通过后，都会自动更新【发布管理】模块中的调试版本：
<img src="https://main.qcloudimg.com/raw/f4cb43be276c8c741cc8c8ae27bf2f3a.png" alt="img"> <strong>测试和发布 Bot</strong>
Bot 存在调试版本时，可进行测试，在 Bot 配置的任意页面单击【测试】，弹出测试侧边栏，与 Bot 进行对话测试，测试无误后可对当前调试版本进行发布上线。例如测试 TravelBot：
<img src="https://main.qcloudimg.com/raw/a0aff5def4bf8c3006b9186520422e08.png" alt="img">
TravelBot 测试无误后，进入【发布管理】模块，单击【发布上线】，将当前版本发布为线上版本：
<img src="https://main.qcloudimg.com/raw/1e894874ae8d551c6e9b07cf6cbfa74d.png" alt="img"></p> <h2 id="_4-接入-bot"><a href="#_4-接入-bot" class="header-anchor">#</a> 4. 接入 Bot</h2> <p>线上版本可供各类应用或终端接入使用，下面以微信公众号接入 TravelBot 为例进行介绍。
当 TravelBot 存在线上版本时，可在【应用接入】模块开启微信公众号接入按钮，此时将弹出接入配置对话框：
<img src="https://main.qcloudimg.com/raw/77b780ac2090fdb33e59182dbae1b559.png" alt="img"> <img src="https://main.qcloudimg.com/raw/290fe86fb9fda3dd6447b63e572f51b5.png" alt="img">
单击【微信公众号授权接入】，将跳转到公众平台账号授权页面，使用公众平台绑定的管理员个人微信号扫描页面的二维码，并授权接入。授权成功后公众号便接入了 TravelBot，此时可在公众号对话界面与 TravelBot 进行对话：
<img src="https://main.qcloudimg.com/raw/2bfadecef3faae80ac28e5fac8a00514.png" alt="img"> <img src="https://main.qcloudimg.com/raw/6c8c92c3c3c18e0bbdc9f61ab83c93c6.png" alt="img"> <img src="https://main.qcloudimg.com/raw/8212958511f021b131252fa3dc6242ca.png" alt="img"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/document/qa/qa-bot.html">创建一个 QA 问答型机器人</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/document/assets/js/app.5ef7bbe5.js" defer></script><script src="/document/assets/js/2.87b3b906.js" defer></script><script src="/document/assets/js/10.0ab90938.js" defer></script>
  </body>
</html>
