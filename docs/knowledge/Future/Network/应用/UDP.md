---
layout: CustomPages
title: 应用
date: 2020-11-21
aside: false
draft: true
---

# UDP

UDP 又叫用户数据报协议。UDP 是一个无连接的、不可靠、基于数据报的传输协议。UDP 是不需要和 TCP 一样在发送数据前进行三次握手建立连接的，想发数据就可以开始发送了。

特点：

- 面向报文
- 不可靠传输
- 高效

### 面向报文

UDP 是一个面向报文（报文可以理解为一段段的数据）的协议。意思就是 UDP 只是报文的搬运工，不会对报文进行任何拆分和拼接操作。

具体来说

- 在发送端，应用层将数据传递给传输层的 UDP 协议，UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给网络层了
- 在接收端，网络层将数据传递给传输层，UDP 只去除 IP 报文头就传递给应用层，不会任何拼接操作

### 不可靠性

1. UDP 是**无连接**的，也就是说通讯不需要建立和断开链接。
2. UDP 是不可靠的。它不会去备份数据，也不关心对方是否能收到数据。
3. UDP**没有拥塞控制**，一直以恒定的速度发送数据，即使网络条件不好，也不进行速率调整。 造成的弊端就是在网络条件不好时可能导致丢包。

### 高效性

因为 UDP 没有 TCP 那么复杂，不需要保证数据不丢失且有序到达。所以 UDP 的头部开销小，只有八字节，相比 TCP 的至少二十字节要少得多，在传输数据报文时是很高效的。

UDP 包头部包含了以下几个数据

- 两个十六位的端口号，分别为源端口（可选字段）和目标端口
- 整个数据报文的长度
- 整个数据报文的检验和（IPv4 可选 字段），该字段用于发现头部信息和数据中的错误

![UDP Header](../img/UDP.png)

### 适合使用的场景

UDP 虽然对比 TCP 有很多缺点，但是正是因为这些缺点造就了它高效的特性，在很多实时性要求高的地方都可以看到 UDP 的身影。
当强调输出性能而非完整性时，如音频和多媒体的实时传输。视频流传输协议 RTP 的实时传输就是基于 UDP 封装而来的。

### 传输方式

支持一对一，一对多，多对多，多对一的方式，也就是说 UDP 提供了单播，多播，广播的功能。

### 小结

- UDP 相比 TCP 简单的多，不需要建立连接，不需要验证数据报文，不需要流量控制，只会把想发的数据报文一股脑的丢给对端
- 虽然 UDP 并没有 TCP 传输来的准确，但是也能在很多实时性要求高的地方有所作为

### TCP 和 UDP 的区别？

TCP 基本是和 UDP 反着来，建立连接断开连接都需要先需要进行握手。在传输数据的过程中，通过各种算法保证数据的可靠性，当然带来的问题就是相比 UDP 来说不那么的高效。

1. TCP 是面向连接的，udp 是无连接的即发送数据前不需要先建立链接。
2. TCP 提供可靠的服务。也就是说，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP 尽最大努力交付，即不保证可靠交付。 并且因为 TCP 可靠，面向连接，不会丢失数据因此适合大数据量的交换。
3. TCP 是面向字节流，UDP 面向报文，并且网络出现拥塞不会使得发送速率降低（因此会出现丢包，对实时的应用比如 IP 电话和视频会议等）。
4. TCP 只能是 1 对 1 的，UDP 支持 1 对 1,1 对多。
5. TCP 的首部较大为 20 字节，而 UDP 只有 8 字节。
6. TCP 是面向连接的可靠性传输，而 UDP 是不可靠的。

- TCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。一个 TCP 连接必须要经过三次“对话”才能建立起来

- UDP（User Data Protocol，用户数据报协议）是与 TCP 相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去！ UDP 适用于一次只传送少量数据、对可靠性要求不高的应用环境。

#### UDP

- UDP 协议是面向无连接的，也就是说不需要在正式传递数据之前先连接起双方。
- UDP 协议只是数据报文的搬运工，不保证有序且不丢失的传递到对端
- UDP 协议也没有任何控制流量的算法，总的来说 UDP 相较于 TCP 更加的轻便。

UDP 对应的协议：

1.  DNS：用于域名解析服务，将域名地址转换为 IP 地址。DNS 用的是 53 号端口。
2.  SNMP：简单网络管理协议，使用 161 号端口，是用来管理网络设备的。由于网络设备很多，无连接的服务就体现出其优势。
3.  TFTP(Trival File Transfer Protocal)，简单文件传输协议，该协议在熟知端口 69 上使用 UDP 服务。

#### TCP

- TCP 提供面向连接的、可靠的数据流传输，而 UDP 提供的是非面向连接的、不可靠的数据流传输。
- TCP 传输单位称为 TCP 报文段，UDP 传输单位称为用户数据报。
- TCP 注重数据安全性，UDP 数据传输快，因为不需要连接等待，少了许多操作，但是其安全性却一般。
- TCP 对应的协议和 UDP 对应的协议

TCP 对应的协议：

1.  FTP：定义了文件传输协议，使用 21 端口。
2.  Telnet：一种用于远程登陆的端口，使用 23 端口，用户可以以自己的身份远程连接到计算机上，可提供基于 DOS 模式下的通信服务。
3.  SMTP：邮件传送协议，用于发送邮件。服务器开放的是 25 号端口。
4.  POP3：它是和 SMTP 对应，POP3 用于接收邮件。POP3 协议所用的是 110 端口。
5.  HTTP：是从 Web 服务器传输超文本到本地浏览器的传送协议。

### 域名解析时是 TCP 还是 UDP

DNS 解析是 UDP

### 在和服务器建立连接时，用的是 TCP 还是 UDP ？

### UDP 的阻塞机制，如何处理
