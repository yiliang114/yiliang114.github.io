---
layout: CustomPages
title: mobile
date: 2020-11-21
aside: false
draft: true
---

[](https://www.cnblogs.com/ljx20180807/p/9729941.html)
http://caibaojian.com/c/mobile/page/6

### 1px 的边框问题

https://www.jianshu.com/p/7e63f5a32636

一般来说，在 PC 端浏览器中，设备像素比（dpr）等于 1，1 个 css 像素就代表 1 个物理像素；但是在 retina 屏幕中，dpr 普遍是 2 或 3，1 个 css 像素不再等于 1 个物理像素，因此比实际设计稿看起来粗不少。

1. 伪元素+scale

```html
<style>
  .box {
    width: 100%;
    height: 1px;
    margin: 20px 0;
    position: relative;
  }
  .box::after {
    content: '';
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 1px;
    transform: scaleY(0.5);
    transform-origin: 0 0;
    background: red;
  }
</style>

<div class="box"></div>
```

2. border-image

```css
div {
  border-width: 1px 0px;
  -webkit-border-image: url(border.png) 2 0 stretch;
  border-image: url(border.png) 2 0 stretch;
}
```

### 移动端布局的坑

https://www.bbsmax.com/A/xl56b4Ao5r/

### h5 键盘

window.onresize 事件来做突破点的，但是 ios 中软键盘的弹起收起并不触发 window.onresize 事件。
总结：

1. 在 ios 中软键盘弹起时，仅会引起\$(‘body’).scrollTop 值改变，但是我们可以通过输入框的获取焦点情况来做判断，但也只能在 ios 中采用这个方案，因为在 android 中存在主动收起键盘后，但输入框并没有失焦，而 ios 中键盘收起后就会失焦；
2. 在 android 中软键盘弹起或收起时，会改变 window 的高度，因此监听 window 的 onresize 事件；

#### Android

```js
//获取原窗口的高度
var originalHeight = document.documentElement.clientHeight || document.body.clientHeight;
window.οnresize = function() {
  //键盘弹起与隐藏都会引起窗口的高度发生变化
  var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight;
  if (resizeHeight - 0 < originalHeight - 0) {
    //当软键盘弹起，在此处操作
  } else {
    //当软键盘收起，在此处操作
  }
};
```

#### ios

focusin 和 focusout 支持冒泡，对应 focus 和 blur, 使用 focusin 和 focusout 的原因是 focusin 和 focusout 可以冒泡，focus 和 blur 不会冒泡，这样就可以使用事件代理，处理多个输入框存在的情况。

```js
 document.body.addEventListener('focusin', () => {
            //软键盘弹出的事件处理
            if(isIphone()）{

            }
        })
  document.body.addEventListener('focusout', () => {
       //软键盘收起的事件处理
        if(isIphone()）{

        }
   })
```

### 用户页面遇到白屏问题，解决问题的思路

### 滑动穿透问题解决
