---
layout: CustomPages
title: html
date: 2020-11-21
aside: false
draft: true
---

### 100 乘 100 的 Canvas 占内存多大？

我们在定义颜色的时候就是使用 rgba(r,g,b,a) 四个维度来表示，而且每个像素值就是用十六位 00-ff 表示，即每个维度的范围是 0~255，即 2^8 位，即 1 byte, 也就是 Uint8 能表示的范围。
所以 100 \_ 100 canvas 占的内存是 100 \* 100 \* 4 bytes = 40,000 bytes

### 说说 svg 和 canvas 各自的优缺点？

共同点：都是有效的图形工具，对于数据较小的情况下，都很又高的性能，它们都使用 JavaScript 和 HTML；它们都遵守万维网联合会 (W3C) 标准。

svg 优点：
矢量图，不依赖于像素，无限放大后不会失真。
以 dom 的形式表示，事件绑定由浏览器直接分发到节点上。
svg 缺点：
dom 形式，涉及到动画时候需要更新 dom，性能较低。

canvas 优点：
定制型更强，可以绘制绘制自己想要的东西。
非 dom 结构形式，用 JavaScript 进行绘制，涉及到动画性能较高。
canvas 缺点：
事件分发由 canvas 处理，绘制的内容的事件需要自己做处理。
依赖于像素，无法高效保真，画布较大时候性能较低。

### canvas 和 svg 的区别

canvas 是 html5 提供的新元素<canvas\>，而 svg 存在的历史要比 canvas 久远，已经有十几年了。svg 并不是 html5 专有的标签，最初 svg 是用 xml 技术（超文本扩展语言，可以自定义标签或属性）描述二维图形的语言。在 H5 中看似 canvas 与 svg 很像，但是，他们有巨大的差别。

首先，从它们的功能上来讲，canvas 可以看做是一个画布。，其绘制出来的图形为**标量图**，因此，可以在 canvas 中引入 jpg 或 png 这类格式的图片，在实际开发中，大型的网络**游戏**都是用 canvas 画布做出来的，并且 canvas 的技术现在已经相当的成熟。另外，我们喜欢用 canvas 来做一些统计用的图表，如柱状图曲线图或饼状图等。
而 svg，所绘制的图形为**矢量图**，所以其用法上受到了限制。因为只能绘制矢量图，所以 svg 中不能引入普通的图片，因为矢量图的不会失真的效果，在项目中我们会用来**做小图标**。但是由于其本质为矢量图，可以被无限放大而不会失真，这很适合被用来做地图，而百度地图就是用 svg 技术做出来的。

另外从技术发面来讲 canvas 里面绘制的图形不能被引擎抓取，如我们要让 canvas 里面的一个图片跟随鼠标事件: canvas.onmouseover=function(){}。
而 svg 里面的图形可以被引擎抓取，支持事件的绑定。另外 canvas 中我们绘制图形通常是通过 javascript 来实现，svg 更多的是通过标签来来实现，如在 svg 中绘制正矩形形就要用<rect>，这里我们不能用属性 style="width:XXX;height:XXX;"来定义。

### 谈谈你对 canvas 的理解？

canvas 是 HTML5 中新增一个 HTML5 标签与操作 canvas 的 javascript API，它可以实现在网页中完成动态的 2D 与 3D 图像技术。标记和 SVG 以及 VML 之间的一个重要的不同是，有一个基于 JavaScript 的绘图 API，而 SVG 和 VML 使用一个 XML 文档来描述绘图。SVG 绘图很容易编辑与生成，但功能明显要弱一些。 canvas 可以完成动画、游戏、图表、图像处理等原来需要 Flash 完成的一些功能。

### 看你简历上写了 canvas，你说一下为什么 canvas 的图片为什么过有跨域问题。

canvas 图片为什么跨域我不知道，至今没查出来，也差不多，大概跨域原因和浏览器跨域的原因是一样的吧。

### 我现在有一个 canvas，上面随机布着一些黑块，请实现方法，计算 canvas 上有多少个黑块。

使用 getImageData 获取像素数组，然后遍历数组，把在遍历节点的过程中，查看节点上下左右的像素颜色是否相同，如果相同，然后设置标识，最后 groupBy 一下所有像素。（这是我当时的方案）

其他更好的答案[见地址](https://www.jianshu.com/p/f54d265f7aa4)

### 说说你对 SVG 理解?

SVG 可缩放矢量图形（ Scalable Vector Graphics ）是基于可扩展标记语言（ XML ），用于描述二维矢量图形的一种图形格式。 SVG 是 W3C('World Wide Web ConSortium' 即 ' 国际互联网标准组织 ') 在 2000 年 8 月制定的一种新的二维矢量图形格式，也是规范中的网络矢量图形标准。 SVG 严格遵从 XML 语法，并用文本格式的描述性语言来描述图像内容，因此是一种和图像分辨率无关的矢量图形格式。 SVG 于 2003 年 1 月 14 日成为 W3C 推荐标准。
特点：
(1)任意放缩
用户可以任意缩放图像显示，而不会破坏图像的清晰度、细节等。
(2)文本独立
SVG 图像中的文字独立于图像，文字保留可编辑和可搜寻的状态。也不会再有字体的限制，用户系统即使没有安装某一字体，也会看到和他们制作时完全相同的画面。
(3)较小文件
总体来讲，SVG 文件比那些 GIF 和 JPEG 格式的文件要小很多，因而下载也很快。
(4)超强显示效果
SVG 图像在屏幕上总是边缘清晰，它的清晰度适合任何屏幕分辨率和打印分辨率。
(5)超级颜色控制
SVG 图像提供一个 1600 万种颜色的调色板，支持 ICC 颜色描述文件标准、 RGB 、线 X 填充、渐变和蒙版。
(6)交互 X 和智能化。 SVG 面临的主要问题一个是如何和已经占有重要市场份额的矢量图形格式 Flash 竞争的问题，另一个问题就是 SVG 的本地运行环境下的厂家支持程度。
浏览器支持：
Internet Explorer9，火狐，谷歌 Chrome ， Opera 和 Safari 都支持 SVG 。
IE8 和早期版本都需要一个插件 - 如 Adobe SVG 浏览器，这是免费提供的。

### 什么是 WebGL,它有什么优点?

WebGL（全写 Web Graphics Library ）是一种 3D 绘图标准，这种绘图技术标准允许把 JavaScript 和 OpenGL ES 2.0 结合在一起，通过增加 OpenGL ES 2.0 的一个 JavaScript 绑定， WebGL 可以为 HTML5 Canvas 提供硬件 3D 加速渲染，这样 Web 开发人员就可以借助系统显卡来在浏览器里更流畅地展示 3D 场景和模型了，还能创建复杂的导航和数据视觉化。显然， WebGL 技术标准免去了开发网页专用渲染插件的麻烦，可被用于创建具有复杂 3D 结构的网站页面，甚至可以用来设计 3D 网页游戏等等。
WebGL 完美地解决了现有的 Web 交互式三维动画的两个问题：
第一，它通过 HTML 脚本本身实现 Web 交互式三维动画的制作，无需任何浏览器插件支持 ;
第二，它利用底层的图形硬件加速功能进行的图形渲染，是通过统一的、标准的、跨平台的 OpenGL 接口实现的。
通俗说 WebGL 中 canvas 绘图中的 3D 版本。因为原生的 WebGL 很复杂，我们经常会使用一些三方的库，如 three.js 等，这些库多数用于 HTML5 游戏开发。

### 了解 css icon fonts svg 雪碧图等原理和用法

### SVG 和 Canvas 的区别？

### 说说 svg 和 canvas 各自的优缺点？

共同点：都是有效的图形工具，对于数据较小的情况下，都很又高的性能，它们都使用 JavaScript 和 HTML；它们都遵守万维网联合会 (W3C) 标准。

svg 优点：
矢量图，不依赖于像素，无限放大后不会失真。
以 dom 的形式表示，事件绑定由浏览器直接分发到节点上。
svg 缺点：
dom 形式，涉及到动画时候需要更新 dom，性能较低。

canvas 优点：
定制型更强，可以绘制绘制自己想要的东西。
非 dom 结构形式，用 JavaScript 进行绘制，涉及到动画性能较高。
canvas 缺点：
事件分发由 canvas 处理，绘制的内容的事件需要自己做处理。
依赖于像素，无法高效保真，画布较大时候性能较低。

### 你刚刚说的 canvas 渲染较大画布的时候性能会较低？为什么？

因为 canvas 依赖于像素，在绘制过程中是一个一个像素去绘制的，当画布足够大，像素点也就会足够多，那么想能就会足够低。

### 假设我现在有 5000 个圆，完全绘制出来，点击某一个圆，该圆高亮，另外 4999 个圆设为半透明，分别说说用 svg 和 canvas 怎么实现？

首先，从数据出发，我们的每个圆是一个数据，这个数据有圆的 x、y、radius、isHighlight 如果是 svg，直接渲染节点即可，然后往节点上边绑定点击事件，点击改变所有数据的高亮属性（必须同步执行完成），然后让浏览器进行绘制。如果是 canvas，我们需要自己绑定事件到 canvans 标签上，然后点击的时候判断点击的位置是否在圆内，如果在某个圆内，则更新所有数据的高亮属性，之后在进行一次性绘制。

### 刚刚说的 canvas 的点击事件，怎么样实现？假如不是圆，这些图形是正方形、长方形、规则图形、不规则图形呢。

针对于每一个形状，将其抽象成 shape 类，每一个类有自己的方法 isPointInSide 来判断节点是否在图形内，对于不规则图形，当做矩形处理，点击的时候执行该方法判断点击位置是否在图形内。

### 那假如我的图形可能有变形、放大、偏移、旋转的需求呢？你的这个 isPointInSide 怎么处理？

这个我答不出来，据面试官提示，好像有相应的 API 处理变形、旋转、放大等等之后的位置映射关系。

### 那个这个 canvas 的点击事件，点击的时候怎么样快速的从这 5000 个圆中找到你点击的那个圆（不完全遍历 5000 个节点）？

可以通过预查找的形式，当鼠标划过的时候预先查找到鼠标附近的一些节点，当点击的时候在从这些预先筛选好的节点里查找点击下来的节点，当然这个方法的前提是不能影响 js 主线程的执行，必须是异步的形式。

### canvas 的基本使用和其他使用场景有哪些

### 其他

- 2d 绘图（canvas 和 svg）
