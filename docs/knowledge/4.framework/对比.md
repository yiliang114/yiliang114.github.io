---
title: Vue vs React
date: 2020-11-21
draft: true
---

### Vue 和 React 之间的区别

1. 数据绑定 Vue 双向绑定， React 单向数据流。
2. Vue 默认使用 template 模板，React 使用 JSX。
3. 改变数据方式不同，Vue 修改状态相比来说要简单许多，React 需要使用 `setState` 来改变状态，并且使用这个 API 也有一些坑点。并且 Vue 的底层使用了依赖追踪，页面更新渲染已经是最优的了，但是 React 还是需要用户手动去优化这方面的问题。
4. React 16 以后，有些钩子函数会执行多次，这是因为引入 Fiber 的原因。
5. React 需要使用 JSX，有一定的上手成本，并且需要一整套的工具链支持，但是完全可以通过 JS 来控制页面，更加的灵活。Vue 使用了模板语法，相比于 JSX 来说没有那么灵活，但是完全可以脱离工具链，通过直接编写 `render` 函数就能在浏览器中运行。
6. React 相较于 Vue 来说上手成本略高， 例如 JSX 之类的概念。vue 简单很多，官方做了做了很多 CSS script 编译

### React 与 Vue 区别

- api
  - Vue 多，计算属性，watch 这种神器
  - React 少，更多功能留给社区，比如写个函数还有 bind 以下
- 应用
  - Vue 适合面向用户的，复杂度稍低一些的
  - React 复杂的
- 测试
  - React 函数式编程利于测试

### Vue 和 React 区别

- 相同点：都支持 `ssr`，都有 `vdom`，组件化开发，实现 `webComponents` 规范，数据驱动等
- 不同点：`Vue` 是双向数据流（当然为了实现单数据流方便管理组件状态，`vuex` 便出现了），`React` 是单向数据流。`Vue`的 `vdom` 是追踪每个组件的依赖关系，不会渲染整个组件树，`React` 每当应该状态被改变时，全部子组件都会 `re-render`

### React 和 Vue 对比

相同点:

数据驱动视图，提供响应式的视图组件
都有 Virtual DOM，组件化开发，通过 props 参数进行父子组件数据的传递，都实现 webComponents 规范
数据流动单向
都支持服务端渲染
都有支持 native 的方案，React 的 React native，Vue 的 weex
不同点：

社区：React 社区还是要比 vue 大很多；

开发模式：React 在 view 层侵入性还是要比 Vue 大很多的,React 严格上只针对 MVC 的 view 层，Vue 则是 MVVM 模式的一种实现；

数据绑定：Vue 有实现了双向数据绑定，React 数据流动是单向的

数据渲染：对于大规模数据渲染，React 要比 Vue 更快，渲染机制启动时候要做的工作比较多；

数据更新方面：Vue 由于采用依赖追踪，默认就是优化状态：你动了多少数据，就触发多少更新，不多也不少。React 在复杂的应用里有两个选择:

(1). 手动添加 shouldComponentUpdate 来避免不需要的 vdom re-render。 (2).Components 尽可能都用 pureRenderMixin，然后采用 redux 结构 + Immutable.js；

开发风格的偏好：React 推荐的做法是 JSX + inline style，也就是把 HTML 和 CSS 全都写进 JavaScript 了，即"all in js"；Vue 进阶之后推荐的是使用 webpack + vue-loader 的单文件组件格式，即 html,css,js 写在同一个文件；

使用场景：React 配合 Redux 架构适合超大规模多人协作的复杂项目;Vue 则适合小快灵的项目。对于需要对 DOM 进行很多自定义操作的项目，Vue 的灵活性优于 React；

Vue 要比 React 更好上手，具体可能体现在很多人不熟悉 React 的 JSX 语法和函数式编程的思想，以及想要发挥出 React 的最大威力需要学习它一系列生态的缘故；

Vue 着重提高开发效率,让前端程序员更快速方便的开发应用。React 着重于变革开发思想，提升前端程序员编程的深度与创造力,让前端工程师成为真正的程序员而不是 UI 的构建者；

#### React 优势

- 在大型应用程序开发中提供更大的灵活性。
- 更容易测试。
- 更适合创建移动端应用程序。
- 提供更多的信息和解决方案。

### react 和 vue 更新机制的区别

React 组件的属性

React 是一个单纯的 view 层框架,官方推荐使用 JSX 预发来维护组件的状态.通过 Props 和 state 来共同决定组件的表现.

- Props
  正如 prop 的英文意思属性一样,Props 中的数据主要用来定义和描述组件的属性,该数据是由父组件在声明 React 组件的时候设置,就好比我们给一个 img 标签设置一个 src 属性一样,我们可以给自定义的 React 组件设置许多属性. 这些属性定义了 React 组件的表现形式,父组件可以通过修改 Props 中的属性来控制子组件的表现.
- state
  同样的,state 表示状态,那么 state 中的数据主要用来控制组件内部的状态. 也就是说组件内部的变化,不需要同外部有交互的数据,都可以有组件自己通过 state 来控制.
  React 虚拟树更新原则

React 中应用虚拟 DOM 来更新快速更新 DOM,那么更新虚拟 DOM 的原则主要是以下几种:

- 不同元素
  如果更新前后是两种不同类型的 DOM 元素,那就没什么说的,直接销毁原来的节点,创建新的节点.(比如原来是 div,更新为 span)在这个过程中,原来节点的 componentWillUnmount 函数被触犯, 新节点的 componentWillMount 和 componentDidMount 依次被触发. 需要特别指出的是,当前更新节点的所有子节点都会被销毁重建,而不管子节点是否有更新. 简单的来说,就是根变了,那么这个根上的所有叶子都要更新了.
- 相同元素,不同属性
  当节点类型没有发生变化,而只是熟悉变化的话,React 就智能多了,只会更新变化的部分. 好比是一个元素有多个 CSS 样式,如果只变化了一个样式,那么 React 也只更新一个. 当元素不是叶子节点的时候,也就是一个组件元素的时候,会继续深入的去比较子元素来更新子元素.
- 子元素变动.
  当子元素有变动的时候,React 会更新子元素.
  子元素的变动指的是资源的类型/属性/位置等的变动. 类型和属性的变动会触发更新,这个比较好理解.子元素的位置变动,指的是如果一个资源原来在第一位,更新后到第二位了,React 会认为这是一种变动,从而触发更新.
- key 属性的重要作用
  这样看起来 React 也没有那么智能.那么这个时候就要引入一个很重要的 key 属性.React 通过给子组件一个 key 属性.来唯一标识一个子组件,如果更新前后的组件 key 值一样,并且除了位置之外其他属性没有变化,那么就不会触发更新.

Vue 的数据

Vue 是一个传统意义上的 mvc 模型.通过实例化一个 vue 对象来绑定 dom 和 data 的关系,也就是绑定 view 和 model.通过对 model 中每个属性添加反射来完成监视器的注册. 当 model 中的数据模型变化时,watcher 会重新计算,从而引发 view 层的更新.

这也就是理解了为什么 Vue 是单向数据流了

Vue 的更新.

上面提到,vue 的更新是 model 中数据的变化引发在初始化时注入的 watcher 的变化,从而引起 view 层的更新.只要观察到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据改变。如果同一个 watcher 被多次触发，只会一次推入到队列中。

根据以上特点,我们知道 vue 中的组件更新是有 model 数据的更新引起的,因为 view 和 model 在初始化时已经完成绑定,所以当 model 发生变化时,哪些 view 需要变化已经很明确了,所以就不需要像 React 那般去判断比对了

### 单向数据流和双向数据流区别？

> 经常看见在 Vue 或者 angular 的介绍里说自己的特色是双向数据绑定，而在看 React 的介绍中，说自己的优势和特色是单向数据绑定。 这两个截然不同的机制，为什么又都能自圆其说呢？在同一个时代里怎么建立统一的理解？还是说两种机制有各自适合的最佳场景？

一般来说，非 UI 控件不存在双向的，只有单向数据流。UI 控件才有双向的数据流问题。

单向绑定使得数据流也是单向的，对于复杂应用来说这是实施统一的状态管理（如 redux）的前提。

双向绑定在一些需要实时反应用户输入的场合会非常方便（eg. 多级联动菜单）。但通常认为复杂应用中这种便利比不上引入状态管理带来的优势。

#### 二者的差异

#### 原理

**双向数据绑定和单向数据绑定的差异在于：双向数据绑定是把数据变更的操作隐藏的框架内部，调用者并不会直接感知。**

单向绑定相对应的似的数据流也是单向的，而在践行单向数据流的 flux 的设计框架（redux 是其一个具体实现）中实现中，其实不过是在全局搞了一个单例的事件分发器（dispatcher）,开发者必须显示的通过这个统一的时间机制来做数据变更通知。

其实这种方式跟框架对 UI 控件上实现双向绑定的方式是一样的。**底层都是事件机制**。

> 假设在双向绑定的应用中，我们有办法 hack 进框架对 UI 控件 自动绑定的事件 listener 或 数据 watcher，然后加上类似 dispatcher 的逻辑，双向绑定背后的状态变化我们一样可以管理起来，一样可以享用单向数据流才有的收益。

> 单向绑定中如果我们做进一步的封装，把 action 和 dispatcher 都隐藏在框架内部，最后就变成。如果再进一步，把相互手动通知机制再隐藏起来，就变成![sx2](https://wire.cdn-go.cn/wire-cdn/b23befc0/blog/images/sx2.jpg)sx

其实单双向绑定在一定程度上来说是可以转化的。只不过是框架封装程度上的差异，本质是可以相互转化的。

#### 优缺点

#### 单向绑定

##### 优点

- 单向绑定可以相应的带来单向数据流，这样的好处是所有的状态变化都是可以被记录、跟踪，状态变化通过手动调用通知，源头易追溯，没有“暗箱操作”。
- 组件数据只有唯一的入口和出口，使得程序更加直观更容易理解，有利于应用的可维护性。

##### 缺点

- 代码量会相应的上升，数据的流转过程变长，从而出现很多类似的样板代码。
- 由于对应用状态独立管理的严格要求（单一的全局 store）,在处理局部状态较多的场景时，会显得啰嗦以及繁琐。

#### 双向绑定

##### 优点

- 在表单交互较多的情况下，会简化大量业务无关的代码。

##### 缺点

- 由于都是“暗箱操作”，我们无法追踪局部状态的变化（虽然大部分情况下我们并不关心），潜在的行为太多也增加了出错时 debug 的难度。
- 由于组件数据变化来源入口变的可能不止一个，新手很容易将数据流转方向弄的紊乱，如果再缺乏一些“管制”手段，最后就很容易一处错误操作造成应用雪崩。

#### 适用场景

由以上的优缺点，我们可以得出单向绑定和双向绑定在功能上基本是互补的。

在 UI 控件中（通常是类表单操作），我们会使用双向的方式绑定数据；而其他场景则统一采用单向的方式构建应用。
