---
layout: CustomPages
title: Network
date: 2020-11-21
aside: false
draft: true
---

### 实现浏览器内多个标签页之间的通信

- 可以调用 localStorage, cookies 等本地存储方式；
- localStorage 另一个浏览上下文里被添加、修改或删除时，它都会触发一个事件，我们通过监听事件，控制它的值来进行页面信息通信；监听 window.onstorage。
  1. 重复写入相同的值无法触发。
  2. 会受到浏览器隐身模式等的限制
- 注意 quirks： Safari 在无痕模式下设置 localStorage 值时会抛出 QuotaExceededError 的异常；
- iframe + contentWindow
- 通过父页面 window.open()和子页面 postMessage
- SharedWorker(Web Worker API)
- storage 事件(localStorage API)
- 借助服务端或者中间层实现

### WEB 应用从服务器主动推送 Data 到客户端有那些方式？

1. html5 websocket
2. WebSocket 通过 Flash
3. XHR 长时间连接
4. XHR Multipart Streaming
5. 不可见的 Iframe
6. script 标签的长时间连接(可跨域)

### 什么是一级域名，什么是二级域名，什么是三级域名

通俗的解释：baidu.com 是一级域名，zhidao.baidu.com 是二级域名。www.baidu.com 是域名 baidu.com 的一个二级域名，只不过是一个比较特殊的二级域名罢了。他的特殊就在于现在的实践中，人们在解析域名的的时候，在惯例和默认的情况下，是把 www.baidu.com 这个二级域名指向它的一级域名 baidu.com。因此，现在的大部分情况下，baidu.com 和 www.baidu.com，都是一样的，有和没有 www 一般没有关系。

#### 原理

为什么大都数网站打开二级域名 www.baidu.com 和打开一级域名 baidu.com 是一样的，其实是把两个域名都解析到了同一个 IP 或期中的一个做了 301 中转。这样做的目的是符合网民的使用习惯，有利于网站的权重集中。

### 服务器辨别用户

- session
- cookie

### 网络分层七层模型

- 应用层：应用层、表示层、会话层（从上往下）（`HTTP、FTP、SMTP、DNS`）
- 传输层（`TCP`和`UDP`）
- 网络层（`IP`）
- 物理和数据链路层（以太网）

### OSI，TCP/IP，五层协议的体系结构

OSI 分层 （7 层）：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。
TCP/IP 分层（4 层）：网络接口层、 网际层、运输层、 应用层。
五层协议 （5 层）：物理层、数据链路层、网络层、运输层、 应用层。

#### 每一层的协议

物理层：RJ45、CLOCK、IEEE802.3 （中继器，集线器）
数据链路：PPP、FR、HDLC、VLAN、MAC （网桥，交换机）
网络层：IP、ICMP、ARP、RARP、OSPF、IPX、RIP、IGRP、 （路由器）
传输层：TCP、UDP、SPX
会话层：NFS、SQL、NETBIOS、RPC
表示层：JPEG、MPEG、ASII
应用层：FTP、DNS、Telnet、SMTP、HTTP、WWW、NFS

#### 每一层的作用如下

- 物理层：通过媒介传输比特,确定机械及电气规范（比特 Bit）传输介质相关
- 数据链路层：将比特组装成帧和点到点的传递（帧 Frame）定义单个链路上如何传输数据
- 网络层：负责数据包从源到宿的传递和网际互连（包 PackeT）端到端包传输，路由选择、包分解成更小的包
- 传输层：提供端到端的可靠报文传递和错误恢复（段 Segment）选择差错恢复协议还是无差错恢复协议，TCP、UDP
- 会话层：建立、管理和终止会话（会话协议数据单元 SPDU）定义了如何开始、控制、结束一个会话，包括对多个双向消息的控制和管理
- 表示层：对数据进行翻译、加密和压缩（表示协议数据单元 PPDU）定义数据格式以及加密
- 应用层：允许访问 OSI 环境的手段（应用协议数据单元 APDU）为应用提供通信服务

### IP 地址的分类

其中 A、B、C 是基本类，D、E 类作为多播和保留使用。

- A 类地址：以 0 开头， 第一个字节范围：1~127（1.0.0.0 - 127.255.255.255）；
- B 类地址：以 10 开头， 第一个字节范围：128~191（128.0.0.0 - 191.255.255.255）；
- C 类地址：以 110 开头， 第一个字节范围：192~223（192.0.0.0 - 223.255.255.255）；
- D 类地址：以 1110 开头，第一个字节范围：224~239（224.0.0.0 - 239.255.255.255）；（作为多播使用）
- E 类地址：保留

在 IP 地址 3 种主要类型里，各保留了 3 个区域作为私有地址，其地址范围如下：

- A 类地址：10.0.0.0 ～ 10.255.255.255
- B 类地址：172.16.0.0 ～ 172.31.255.255
- C 类地址：192.168.0.0 ～ 192.168.255.255

### 其他

- `TIME_WAIT` 是什么情况? 出现过多的 `TIME_WAIT` 可能是什么原因?
