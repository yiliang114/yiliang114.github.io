---
layout: CustomPages
title: HTTP
date: 2020-11-21
aside: false
draft: true
---

### HTTP Status code 状态码

**2XX 成功**

- 200 OK，表示从客户端发来的请求在服务器端被正确处理
- 204 No content，表示请求成功，但响应报文不含实体的主体部分
- 205 Reset Content，表示请求成功，但响应报文不含实体的主体部分，但是与 204 响应不同在于要求请求方重置内容
- 206 Partial Content，进行范围请求

**3XX 重定向**

- 301 moved permanently，永久性重定向，表示资源已被分配了新的 URL
- 302 found，临时性重定向，表示资源临时被分配了新的 URL
- 303 see other，表示资源存在着另一个 URL，应使用 GET 方法获取资源
- 304 not modified，表示服务器允许访问资源，但因发生请求未满足条件的情况
- 307 temporary redirect，临时重定向，和 302 含义类似，但是期望客户端保持请求方法不变向新的地址发出请求

**4XX 客户端错误**

- 400 bad request，请求报文存在语法错误
- 401 unauthorized，表示发送的请求需要有通过 HTTP 认证的认证信息
- 403 forbidden，表示对请求资源的访问被服务器拒绝
- 404 not found，表示在服务器上没有找到请求的资源

**5XX 服务器错误**

- 500 internal sever error，表示服务器端在执行请求时发生了错误
- 501 Not Implemented，表示服务器不支持当前请求所需要的某个功能
- 503 service unavailable，表明服务器暂时处于超负载或正在停机维护，无法处理请求

在前端开发中，最熟悉的系列无非是大家都喜欢的 200 请求成功的标志，在面试中，问得较多的是 304 缓存问题和 301、302 重定向的问题。

#### 请解释 HTTP status 301 与 302 的区别？

301 Moved Permanently 请求的网页已永久移动到新位置。
302 Found 临时性重定向

共同点：

301 和 302 状态码都表示重定向，就是说浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的 URL 地址，这个地址可以从响应的 Location 首部中获取

区别：

301 表示旧地址 A 的资源已经被永久地移除了（这个资源不可访问了），搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址；302 表示旧地址 A 的资源还在（仍然可以访问），这个重定向只是临时地从旧地址 A 跳转到地址 B，搜索引擎会抓取新的内容而保存旧的网址。

#### 何时进行 301 或者 302 跳转

使用 301 跳转的场景：
1）域名到期不想续费（或者发现了更适合网站的域名），想换个域名。
2）在搜索引擎的搜索结果中出现了不带 www 的域名，而带 www 的域名却没有收录，这个时候可以用 301 重定向来告诉搜索引擎我们目标的域名是哪一个。
3）空间服务器不稳定，换空间的时候。
使用 302 跳转的场景：
1）尽量使用 301 跳转！避免网址劫持

### 简要介绍一次 302 的过程

用户请求一个 url，服务器处理这个 url，设置这个 url 需要重定向，返回用户一个 302 响应，并在 http 头部设置 location 字段为新的地址，
浏览器得到这个响应，根据 location 中新的地址重新发起一次请求。

### 讲讲 304 缓存的原理

- 服务器首先产生 ETag，服务器可在稍后使用它来判断页面是否已经被修改。本质上，客户端通过将该记号传回服务器要求服务器验证其（客户端）缓存
- 304 是 HTTP 状态码，服务器用来标识这个文件没修改，不返回内容，浏览器在接收到个状态码后，会使用浏览器已缓存的文件
- 客户端请求一个页面（A）。 服务器返回页面 A，并在给 A 加上一个 ETag。 客户端展现该页面，并将页面连同 ETag 一起缓存。 客户再次请求页面 A，并将上次请求时服务器返回的 ETag 一起传递给服务器。 服务器检查该 ETag，并判断出该页面自上次客户端请求之后还未被修改，直接返回响应 304（未修改——Not Modified）和一个空的响应体

### 401 与 403

到现在才分清 HTTP Code 里的 401 和 403😓
举例：
我去某小区找个人，想喊门卫大爷开个门。
401：你谁啊，不能进。
403：呦，牛牛来啦，你不能进啊，因为您不配！

### http 的状态码中，499 是什么？如何出现 499，如何排查跟解决

499 对应的是 “client has closed connection”，客户端请求等待链接已经关闭，这很有可能是因为服务器端处理的时间过长，客户端等得“不耐烦”了。还有一种原因是两次提交 post 过快就会出现 499。
解决方法：

- 前端将 timeout 最大等待时间设置大一些
- nginx 上配置 proxy_ignore_client_abort on;
