---
title: 字符串-回文
draft: true
date: 2020-11-29
aside: false
---

## 回文

回文串就是一个正读和反读都一样的字符串，比如 `level` 或者 `noon`等等就是回文串。判断是否回文的通用方法是首尾双指针

### 判断一个字符串是否是回文

```js
var isPalindrome = function(s) {
  // \w 匹配字母、数字、下划线。等价于 [A-Za-z0-9_]
  s = s.replace(/[^\w]/g, '').toLowerCase();
  return (
    s
      .split('')
      .reverse()
      .join('') === s
  );
};
```

### 回文数

转成字符串方式 (感觉这样会比较快)

1. 负数都是非回文数，10 的整数倍不是回文。
2. 将数字转为字符串，再逆序排列字符串。两者比较，相等就是回文数。

直接操作整数方式

1. 复制 x 到 temp;
2. 取 temp 末尾数字，方式为 temp 与 10 的求余；组成新数 reverse;
3. 每取完一位,temp 缩小 10 倍并且去掉小数。
4. reverse 要`先扩大十倍`再加上取下来的数
5. 当 temp === 0 时，表示已经取完；reverse 与 x 比较

```js
/**
 * @param {number} x
 * @return {boolean}
 * 转成字符串
 */
var isPalindrome = function(x) {
  if (x < 0) return false;
  if (x === 0) return true;
  if (x % 10 === 0) return false;
  const str = x + '';
  const reverse = str
    .split('')
    .reverse()
    .join('');
  return str === reverse;
};

/**
 * 性能比字符串翻转好的多
 * @param {number} x
 * @return {boolean}
 * 不转成字符串
 */
var isPalindrome = function(x) {
  if (x < 0) return false;
  if (x === 0) return true;
  if (x % 10 === 0) return false;
  let temp = x;
  let reverse = 0;
  while (temp > 0) {
    let num = temp % 10;
    temp = (temp - num) / 10; // 或 temp = (temp / 10) >> 0,去除小数位
    reverse = reverse * 10 + num;
  }
  return x === reverse;
};
```

### 回文排列

给定一个字符串，写一个函数来检查它是否是 a 的排列回文

```js
function palindromePermutation(str) {
  const newStr = str.replace(/ /g, '').toLowerCase();
  const charCount = new Map();
  for (let i = 0; i < newStr.length; i++) {
    if (!charCount.get(newStr[i])) {
      charCount.set(newStr[i], 1);
    } else {
      charCount.set(newStr[i], charCount.get(newStr[i]) + 1);
    }
  }

  let flagCount = 0;
  for (let i = 0; i < newStr.length; i++) {
    if (charCount.get(newStr[i]) === 1) {
      flagCount += 1;
    }
    if (flagCount === 2) {
      return false;
    }
  }
  return true;
}
```
