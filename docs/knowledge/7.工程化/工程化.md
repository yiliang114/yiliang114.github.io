---
title: 工程化
date: 2020-11-21
draft: true
---

## 工程化

前端工程化方面做了哪些东西?

1. 前端项目标准？
   表现为库的选择？文件划分目录的规定？pc、mobile 多端实践？ssr 方案集成？
2. 组件库集成？
   组件库建设的目的？npm 包的发布？
3. 脚手架工具？
   webpack 编译优化？webpack 打包构建优化？自我脚手架的工具使用？
4. git 提交规范 commit-msg？代码检查规范 eslint？
5. 前端性能监控？前端异常监控？前端用户埋点 sdk？
6. rap？jenkins？

### Eslint 的配置

为了遵循代码规范，使用 eslint 是必不可少的，配置 eslint 有两种方式
第一：使用 eslintrc.js 配置文件

```js
// 安装
npm install eslint --save

// 生成文件
npx eslint --init

// 安装 'babel-eslint',并在eslintrc.js中配置
    "parser": 'babel-eslint',
```

第二：通过 eslint-loader 的配置

```js
// 安装
npm install eslint-loader --save-dev
// module中配置
              {
			test: /\.js$/,
			exclude: /node_modules/,
			use: ['babel-loader', {
				loader: 'eslint-loader',
				options: {
					fix: true // 较为简单的错误可以自动帮助修复
				}
			}

// devserver中配置
		overlay: true, // eslint报错时会在屏幕提示
```

为了提升团队的代码规范，也可以通过 git 的钩子，在代码提交时就对代码作出 eslint 检查

## CI

### 持续集成流程

前端开发转移到后端环境，意味着可以适用标准的软件工程流程。

- 本地开发（developing）
- 静态代码检查（linting）
- 单元测试（testing）
- 合并进入主干（merging）
- 自动构建（building）
- 自动发布（publishing）

### 持续集成的概念

Continuous integration（简称 CI）：开发代码频繁地合并进主干，始终保持可发布状态的这个过程。

优点

- 快速发现错误
- 防止分支大幅偏离主干
- 让产品可以快速迭代，同时还能保持高质量

### 持续集成服务平台

代码合并进主干以后，就可以进行自动构建和发布了。网上有很多 PaaS 平台，提供持续集成服务。Travis CI 就是其中最著名的一个，它可以根据你提供的脚本，自动完成构建和发布。

### CI/CD 流程

ci(持续构建)
代码提交后触发自动化的单元测试，代码预编译，构建镜像，上传镜像等．

cd(持续发布)
持续发布则指将构建好的程序发布到各种环境，如预发布环境，正式环境

### oci 发布管理

- feature-xxx 分支作为日常的开发分支。 pr 合入 dev 发布测试环境

- dev 分支对应测试环境
- preview 分支对应预发环境
- release 分支对应正式环境

- dev 分支 pr 到 preview
- preview 分支 pr 到 release
- master 分支不作修改，仅仅作为当前线上最新可运行的最新副本

- release 分支发布成功之后，自动打 tag 然后自动合入 master 分支中
- hotfix 分支从 release master 或者 tag 中拉出来，需要重新 dev 分支开始合并

## 调试工具

- Fiddler Window PC 端
- Charles Mac 移动端
- Whistle Mac PC/移动端
