---
title: 作用域、变量提升
date: '2020-10-26'
draft: true
---

## 作用域

### 作用域与变量声明提升

- 在 JavaScript 中，函数声明与变量声明会被 JavaScript 引擎隐式地提升到当前作用域的顶部
- 声明语句中的赋值部分并不会被提升，只有名称被提升
- 函数声明的优先级高于变量，如果变量名跟函数名相同且未赋值，则函数声明会覆盖变量声明
- 如果函数有多个同名参数，那么最后一个参数（即使没有定义）会覆盖前面的同名参数

### 变量与函数同名的情况

```js
var b = 10;
(function b() {
  b = 20;
  console.log(b);
})(); //[Function b]
```

```js
var b = 10;
(function b() {
  'use strict';
  b = 20;
  console.log(b);
})(); // "Uncaught TypeError: Assignment to constant variable."
```

函数表达式与函数声明不同，函数名只在该函数内部有效，并且此绑定是常量绑定。
在严格模式下 b 函数相当于常量，无法进行重新赋值，在非严格模式下函数声明优先变量声明

#### 简单改造下面的代码，使之分别打印 10 和 20

```js
var b = 10;
(function b() {
  b = 20;
  console.log(b);
})();
```

- 打印 20

```js
var b = 10;
(function b() {
  var b = 20;
  console.log(b);
})(); // 20 在自执行函数中重新定义一个变量，
```

```js
var b = 10;
(function a() {
  b = 20;
  console.log(b);
})();
```

```js
var b = 10;
(function() {
  b = 20;
  console.log(b);
})();
```

- 打印 10

```js
var b = 10;
(function b() {
  b = 20;
  console.log(window.b);
})();
```

在自执行函数中访问 window，window 中的 b 值为 10 2.

```js
var b = 10;
(function() {
  console.log(b);
  b = 20;
})();
```

```js
var b = 10;
(function b(b) {
  console.log(b);
  b = 20;
})(b);
```

### 作用域

```js
var a = 10;
(function() {
  console.log(a);
  a = 5;
  console.log(window.a);
  var a = 20;
  console.log(a);
})();
// undefined 10 20
```

### 下面的输出是什么？

```js
pi = 0;
radius = 1;
function circum(radius) {
  radius = 3;
  pi = 3.14;
  console.log(2 * pi * radius); // 18.14
  console.log(arguments[0]); // 3
}
circum(2);
console.log(pi); // 3.14
console.log(radius); // 1

// 函数内修改了radius 修改的是形式参数，修改的 pi 是全局的 window or global 中的 pi
```

```js
var pi = 0;
var radius = 1;
function circum(radius) {
  radius = 3;
  pi = 3.14;
  console.log(2 * pi * radius); // 18.84
  console.log(arguments[0]); // 3
}

circum(radius);

console.log(pi); // 3.14
console.log(radius); // 1
```

```js
function foo(a, b) {
  arguments[0] = 9;
  arguments[1] = 99;
  console.log(a, b); //9, 99
}
foo(1, 10);

function foo(a, b) {
  a = 8;
  b = 88;
  console.log(arguments[0], arguments[1]); //8, 88
}
foo(1, 10);

// ES6的默认函数不会改变arguments类数组对象值
function foo(a = 1, b = 10) {
  arguments[0] = 9;
  arguments[1] = 99;
  console.log(a, b); //1, 10
}
foo();

// 实例
function f2(a) {
  console.log(a);
  var a;
  console.log(a);
  console.log(arguments[0]);
}
f2(10);

// 经过变量提升后：
function f2(a) {
  var a;
  console.log(a);
  console.log(a);
  console.log(arguments[0]);
}
f2(10);

// var a会被归纳，由于a已经有值，故不会变为undefined
```

```js
var a = {};
var b = { name: 'ZS' };
var c = {};
c[a] = 'demo1';
c[b] = 'demo2';

console.log(c[a]); // demo2
console.log(c); // Object {[object Object]: "demo2"}
```

c[a]、c[b]隐式的将对象 a，b 使用了 toString（）方法进行了转换，然后再对属性赋值。
即：Object.prototype.toString.call(a) ==> [object Object]
因此，c = { [object Object]: 'demo1'} ==> c = {[object Object]: 'demo2' }

```js
var array1 = Array(3);
array1[0] = 2;
var result = array1.map(elem => '1');

// ['1', empty * 2]
```

```js
var setPerson = function(person) {
  person.name = 'kevin';
  person = { name: 'Nick' };
  console.log(person.name); // Nick
  person.name = 'Jay';
  console.log(person.name); // Jay
};
var person = { name: 'Alan' };
setPerson(person);
console.log(person.name); // Kevin
```

```js
var execFunc = () => console.log('a');
setTimeout(execFunc, 0);
console.log('000');
execFunc = () => console.log('b');

// '000', 'a'
```

`window.setTimeout(hello(userName),3000);`
这将使 hello 函数立即执行，并将'返回值'作为调用句柄传递给 setTimeout 函数

方法 1：
使用'字符串形式'可以达到想要的结果:
`window.setTimeout("hello(userName)",3000);`
但是，此处的 username 变量必须处于全局环境下

```js
// 方法2：
function hello(_name) {
  alert('hello,' + _name);
}
// 创建一个函数，用于返回一个无参数函数
function _hello(_name) {
  return function() {
    hello(_name);
  };
}
window.setTimeout(_hello(userName), 3000);
// 使用_hello(userName)来返回一个不带参数的函数句柄，从而实现了参数传递的功能
```

```js
for (var i = { j: 0 }; i.j < 5; i.j++) {
  (function(i) {
    setTimeout(function() {
      console.log(i.j);
    }, 0);
  })(JSON.parse(JSON.stringify(i)));
}

// 0, 1, 2, 3, 4

for (var i = { j: 0 }; i.j < 5; i.j++) {
  (function(i) {
    setTimeout(function() {
      console.log(i.j);
    }, 0);
  })(i);
}

// 5, 5, 5, 5, 5
```

```js
var name = 'Tom';
(function() {
  if (typeof name == 'undefined') {
    var name = 'Jack';
    console.log('Goodbye ' + name);
  } else {
    console.log('Hello ' + name);
  }
})();
// Goodbye Jack
```

```js
var name = 'Tom';
(function() {
  if (typeof name == 'undefined') {
    name = 'Jack';
    console.log('Goodbye ' + name);
  } else {
    console.log('Hello ' + name);
  }
})();
```

### 下面代码分别输出什么？

```js
function foo() {
  'use strict';
  console.log(this.a);
}

function bar() {
  console.log(this.a);
}

var a = "this is a 'a'";

bar(); // "this is a 'a'"
foo(); // "TypeError: Cannot read property 'a' of undefined
```

接下来我们可以看到当调用 foo() 时，this.a 被解析成了全局变量 a。为什么?因为在本 例中，函数调用时应用了 this 的默认绑定，因此 this 指向全局对象。

bar() 调用使用严格模式(strict mode)，那么全局对象将无法使用默认绑定，因此 this 会绑定 到 undefined

### 下面这段代码的执行结果是什么？

```js
for (var i = 1; i <= 5; i++) {
  setTimeout(function() {
    console.log(i);
  }, i * 1000);
}
```

继续问，怎么实现期望一共返回 1-5，5 个值，并且一秒返回一个值？

> 这段代码,我们预期的结果是：分别输出数字 1~5，每秒一次，每次一个。但是实际结果却是：这段代码在运行时会以每秒一次的频率输出五次 6。

> 这是为什么？

> 首先解释 6 是从哪里来的。这个循环的终止条件是 `i` 不再 `<=5`。条件首次成立时 i 的值是 6。因此，输出显示的是循环结束时 i 的最终值。仔细想一下，这好像又是显而易见的，<u>延迟函数的回调会在循环结束时才执行</u>。事实上， 当定时器运行时即使每个迭代中执行的是 setTimeout(.., 0)，<u>所有的回调函数依然是在循 环结束后才会被执行</u>，因此会每次输出一个 6 出来。

因为外层作用域中只有一个`i`，这个`i`被封闭进去，而不是每个迭代的函数会封闭一个新的`i`.

> ---以上解释来自《你不知道的 JavaScript（上卷）》第五章

这样就可以实现期望一共返回 1-5，5 个值，并且一秒返回一个值

```js
for (let i = 1; i <= 5; i++) {
  setTimeout(function timer() {
    console.log(i);
  }, i * 1000);
}

// or

for (var i = 1; i <= 5; i++) {
  (function(j) {
    setTimeout(function() {
      console.log(j);
    }, j * 1000);
  })(i);
}

// or

for (var i = 1; i <= 5; i++) {
  let j = i;
  setTimeout(function timer() {
    console.log(j);
  }, j * 1000);
}
```

let 声明只属于作用域块。`for`循环头部的`let i`不只是为 for 循环本身声明了一个`i`，而是为循环的每一次迭代都重新声明了一个新的`i`。这意味着 loop 迭代内部创建的闭包封闭的是每次迭代中的变量，就像期望的那样。

或者

```js
for (var i = 1; i <= 5; i++) {
  (function(j) {
    setTimeout(function timer() {
      console.log(j);
    }, j * 1000);
  })(i);
}
```

在迭代内使用 IIFE 会为每个迭代都生成一个新的作用域，使得延迟函数的回调可以将新的
作用域封闭在每个迭代内部，每个迭代中都会含有一个具有正确值的变量供我们访问。

### Scopes

```js
function passWordMngr() {
  var password = '12345678';
  this.userName = 'John';
  return {
    pwd: password,
  };
}
// Block End
var userInfo = passWordMngr();
console.log(userInfo.pwd);
console.log(userInfo.userName);
// 12345678 undefined
```

```js
var employeeId = 'aq123';
function Employee() {
  this.employeeId = 'bq1uy';
}
console.log(Employee.employeeId);
// undefined
```

```js
var employeeId = 'aq123';

function Employee() {
  this.employeeId = 'bq1uy';
}
console.log(new Employee().employeeId);
Employee.prototype.employeeId = 'kj182';
Employee.prototype.JobId = '1BJKSJ';
console.log(new Employee().JobId);
console.log(new Employee().employeeId);
// bq1uy 1BJKSJ bq1uy
```

```js
var employeeId = 'aq123';
(function Employee() {
  try {
    throw 'foo123';
  } catch (employeeId) {
    console.log(employeeId);
  }
  console.log(employeeId);
})();
// foo123 aq123
```

```js
// Call, Apply, Bind
(function() {
  var greet = 'Hello World';
  var toGreet = [].filter.call(greet, function(element, index) {
    return index > 5;
  });
  console.log(toGreet);
})();
// [ 'W', 'o', 'r', 'l', 'd' ]
```

```js
var output = (function(x) {
  delete x;
  return x;
})(0);

console.log(output);
// 0
// delete 只能用于删除对象的属性
```

```js
var x = 1;
var output = (function() {
  delete x;
  return x;
})();

console.log(output);
// 1
```

```js
var x = { foo: 1 };
var output = (function() {
  delete x.foo;
  return x.foo;
})();

console.log(output);
// undefined
```

```js
var Employee = {
  company: 'xyz',
};
var emp1 = Object.create(Employee);
delete emp1.company;
console.log(emp1.company);
// xyz
// 会去拿原型链上的属性
```

```js
var strA = 'hi there';
var strB = strA;
strB = 'bye there!';
console.log(strA);
// hi there
```

```js
var objA = { prop1: 42 };
var objB = objA;
objB.prop1 = 90;
console.log(objA);
// {prop1: 90}
```

```js
var objA = { prop1: 42 };
var objB = objA;
objB = {};
console.log(objA);
// {prop1: 42}
```

```js
var arrA = [0, 1, 2, 3, 4, 5];
var arrB = arrA;
arrB[0] = 42;
console.log(arrA);
// [42,1,2,3,4,5]
```

```js
var arrA = [0, 1, 2, 3, 4, 5];
var arrB = arrA.slice();
arrB[0] = 42;
console.log(arrA);
// [0,1,2,3,4,5]
```

```js
var arrA = [{ prop1: 'value of array A!!' }, { someProp: 'also value of array A!' }, 3, 4, 5];
var arrB = arrA;
arrB[0].prop1 = 42;
console.log(arrA);
// [{prop1: 42}, {someProp: "also value of array A!"}, 3,4,5]
```

```js
var arrA = [{ prop1: 'value of array A!!' }, { someProp: 'also value of array A!' }, 3, 4, 5];
var arrB = arrA.slice();
arrB[0].prop1 = 42;
arrB[3] = 20;
console.log(arrA);

// [{prop1: 42}, {someProp: "also value of array A!"}, 3,4,5]
function slice(arr) {
  var result = [];
  for (i = 0; i < arr.length; i++) {
    result.push(arr[i]);
  }
  return result;
}
```

```js
var trees = ['xyz', 'xxxx', 'test', 'ryan', 'apple'];
delete trees[3];
console.log(trees.length);
// 5
```

```js
var bar = true;
console.log(bar + 0);
console.log(bar + 'xyz');
console.log(bar + true);
console.log(bar + false);
// 1, "truexyz", 2, 1
```

```js
var z = 1,
  y = (z = typeof y);
console.log(y);
// undefined
```

```js
// NFE (Named Function Expression)
var foo = function bar() {
  return 12;
};
typeof bar();
// Reference Error
```

```js
bar();
(function abc() {
  console.log('something');
})();
function bar() {
  console.log('bar got called');
}
// bar got called
// something
```

```js
var salary = '1000$';

(function() {
  console.log('Original salary was ' + salary);

  var salary = '5000$';

  console.log('My New Salary ' + salary);
})();
// undefined, 5000$
```

```js
function User(name) {
  this.name = name || 'JsGeeks';
}

var person = (new User('xyz')['location'] = 'USA');
console.log(person);
// USA
```

## 变量提升

```js
var employeeId = 'abc123';

function foo() {
  employeeId = '123bcd';
  return;

  function employeeId() {}
}
foo();
console.log(employeeId);
// abc123
```

```js
var employeeId = 'abc123';

function foo() {
  employeeId();
  return;

  function employeeId() {
    console.log(typeof employeeId);
  }
}
foo();
// function
```

```js
function foo() {
  employeeId();
  var product = 'Car';
  return;

  function employeeId() {
    console.log(product);
  }
}
foo();
// undefined
```

```js
(function() {
  'use strict';

  var person = {
    name: 'John',
  };
  person.salary = '10000$';
  person['country'] = 'USA';

  Object.defineProperty(person, 'phoneNo', {
    value: '8888888888',
    enumerable: true,
  });

  console.log(Object.keys(person));
})();
// ["name", "salary", "country", "phoneNo"]
```

```js
(function() {
  'use strict';

  var person = {
    name: 'John',
  };
  person.salary = '10000$';
  person['country'] = 'USA';

  Object.defineProperty(person, 'phoneNo', {
    value: '8888888888',
    enumerable: false,
  });

  console.log(Object.keys(person));
})();
// ["name", "salary", "country"]
```

```js
(function() {
  var objA = {
    foo: 'foo',
    bar: 'bar',
  };
  var objB = {
    foo: 'foo',
    bar: 'bar',
  };
  console.log(objA == objB);
  console.log(objA === objB);
})();
// false false
```

```js
function mul(x) {
  return function(y) {
    return {
      result: x * y,
      sum: function(z) {
        return x * y + z;
      },
    };
  };
}
console.log(mul(2)(3).result);
console.log(mul(2)(3).sum(4));

//  6, 10
```

```js
function mul(x) {
  return function(y) {
    return [
      x * y,
      function(z) {
        return x * y + z;
      },
    ];
  };
}

console.log(mul(2)(3)[0]);
console.log(mul(2)(3)[1](4));

// 6, 10
```

```js
function getNumber() {
  return;
}

var numb = getNumber();
console.log(numb);
// undefined
```

```js
function getNumber() {
  return 2, 4, 5;
}

var numb = getNumber();
console.log(numb);
// 5 最后一个值就是 return 回的值
```

```js
(function() {
  function sayHello() {
    var name = 'Hi John';
    return;
    {
      fullName: name;
    }
  }
  console.log(sayHello().fullName);
})();
// 需要在同一行
// Uncaught TypeError: Cannot read property 'fullName' of undefined
```

```js
(function() {
  var arrayNumb = [2, 8, 15, 16, 23, 42];
  Array.prototype.sort = function(a, b) {
    return a - b;
  };
  arrayNumb.sort();
  console.log(arrayNumb);
})();
(function() {
  var numberArray = [2, 8, 15, 16, 23, 42];
  numberArray.sort(function(a, b) {
    if (a == b) {
      return 0;
    } else {
      return a < b ? -1 : 1;
    }
  });
  console.log(numberArray);
})();
(function() {
  var numberArray = [2, 8, 15, 16, 23, 42];
  numberArray.sort(function(a, b) {
    return a - b;
  });
  console.log(numberArray);
})();

// [ 2, 8, 15, 16, 23, 42 ]
// [ 2, 8, 15, 16, 23, 42 ]
// [ 2, 8, 15, 16, 23, 42 ]
```

```js
function getDataFromServer(apiUrl) {
  var name = 'John';
  return {
    then: function(fn) {
      fn(name);
    },
  };
}

getDataFromServer('www.google.com').then(function(name) {
  console.log(name);
});
// John
```

```js
(function greetNewCustomer() {
  console.log('Hello ' + this.name);
}.bind({
  name: 'John',
})());
// Hello John
```

```js
(function() {
  var fooAccount = {
    name: 'John',
    amount: 6000,
    deductAmount: function(amount) {
      this.amount -= amount;
      return this.amount;
    },
  };
  var barAccount = {
    name: 'John',
    amount: 4000,
  };
  var withdrawAmountBy = function(totalAmount) {
    return fooAccount.deductAmount.call(barAccount, totalAmount);
  };
  console.log(withdrawAmountBy(400));
  console.log(withdrawAmountBy(300));
  console.log(withdrawAmountBy(200));
})();

// 4000 - 400
// 3600 - 300
// 3300 - 200
// 3600 3300 3100
```

```js
(function() {
  var objA = new Object({ foo: 'foo' });
  var objB = new Object({ foo: 'foo' });
  console.log(objA == objB);
  console.log(objA === objB);
})();
// false false
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = Object.create({
    foo: 'foo',
  });
  console.log(objA == objB);
  console.log(objA === objB);
})();
// false false
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = Object.create(objA);
  console.log(objA == objB);
  console.log(objA === objB);
})();
// false false
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = Object.create(objA);
  console.log(objA.toString() == objB.toString());
  console.log(objA.toString() === objB.toString());
})();
//  true true
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = objA;
  console.log(objA == objB);
  console.log(objA === objB);
  console.log(objA.toString() == objB.toString());
  console.log(objA.toString() === objB.toString());
})();
// true true true true
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = objA;
  objB.foo = 'bar';
  console.log(objA.foo);
  console.log(objB.foo);
})();
// bar bar
```

```js
(function() {
  var objA = Object.create({
    foo: 'foo',
  });
  var objB = objA;
  objB.foo = 'bar';

  delete objA.foo;
  console.log(objA.foo);
  console.log(objB.foo);
})();
// foo foo
```

```js
(function() {
  var objA = {
    foo: 'foo',
  };
  var objB = objA;
  objB.foo = 'bar';

  delete objA.foo;
  console.log(objA.foo);
  console.log(objB.foo);
})();
// undefined undefined
```

```js
(function() {
  var array = new Array('100');
  console.log(array);
  console.log(array.length);
})();
// ["100"] 1
```

```js
(function() {
  var array1 = [];
  var array2 = new Array(100);
  var array3 = new Array(['1', 2, '3', 4, 5.6]);
  console.log(array1);
  console.log(array2);
  console.log(array3);
  console.log(array3.length);
})();
// [] [] [Array[5]] 1
```

```js
(function() {
  var array = new Array('a', 'b', 'c', 'd', 'e');
  array[10] = 'f';
  delete array[10];
  console.log(array.length);
})();
// 11
```

```js
(function() {
  var animal = ['cow', 'horse'];
  animal.push('cat');
  animal.push('dog', 'rat', 'goat');
  console.log(animal.length);
})();
//  6
```

```js
(function() {
  var animal = ['cow', 'horse'];
  animal.push('cat');
  animal.unshift('dog', 'rat', 'goat');
  console.log(animal);
})();
// [ 'dog', 'rat', 'goat', 'cow', 'horse', 'cat' ]
```

```js
(function() {
  var array = [1, 2, 3, 4, 5];
  console.log(array.indexOf(2));
  console.log([{ name: 'John' }, { name: 'John' }].indexOf({ name: 'John' }));
  console.log([[1], [2], [3], [4]].indexOf([3]));
  console.log('abcdefgh'.indexOf('e'));
})();
// 1 -1 -1 4
```

```js
(function() {
  var array = [1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 6];
  console.log(array.indexOf(2));
  console.log(array.indexOf(2, 3));
  console.log(array.indexOf(2, 10));
})();
//  1 6 -1
```

```js
(function() {
  var numbers = [2, 3, 4, 8, 9, 11, 13, 12, 16];
  var even = numbers.filter(function(element, index) {
    return element % 2 === 0;
  });
  console.log(even);

  var containsDivisibleby3 = numbers.some(function(element, index) {
    return element % 3 === 0;
  });

  console.log(containsDivisibleby3);
})();
// [ 2, 4, 8, 12, 16 ] true
```

```js
(function() {
  var containers = [2, 0, false, '', '12', true];
  var containers = containers.filter(Boolean);
  console.log(containers);
  var containers = containers.filter(Number);
  console.log(containers);
  var containers = containers.filter(String);
  console.log(containers);
  var containers = containers.filter(Object);
  console.log(containers);
})();

// [ 2, '12', true ]
// [ 2, '12', true ]
// [ 2, '12', true ]
// [ 2, '12', true ]
```

```js
(function() {
  var list = ['foo', 'bar', 'john', 'ritz'];
  console.log(list.slice(1));
  console.log(list.slice(1, 3));
  console.log(list.slice());
  console.log(list.slice(2, 2));
  console.log(list);
})();
// [ 'bar', 'john', 'ritz' ]
// [ 'bar', 'john' ]
// [ 'foo', 'bar', 'john', 'ritz' ]
// []
// [ 'foo', 'bar', 'john', 'ritz' ]
```

```js
(function() {
  var list = ['foo', 'bar', 'john'];
  console.log(list.splice(1));
  console.log(list.splice(1, 2));
  console.log(list);
})();
// [ 'bar', 'john' ] [] [ 'foo' ]
```

```js
(function() {
  var arrayNumb = [2, 8, 15, 16, 23, 42];
  arrayNumb.sort();
  console.log(arrayNumb);
})();
// [ 15, 16, 2, 23, 42, 8 ]
```

```js
function funcA() {
  console.log('funcA ', this);
  (function innerFuncA1() {
    console.log('innerFunc1', this);
    (function innerFunA11() {
      console.log('innerFunA11', this);
    })();
  })();
}

console.log(funcA());
// funcA  Window {...}
// innerFunc1 Window {...}
// innerFunA11 Window {...}
```

```js
var obj = {
  message: 'Hello',
  innerMessage: !(function() {
    console.log(this.message);
  })(),
};

console.log(obj.innerMessage);
// undefined true
```

```js
var obj = {
  message: 'Hello',
  innerMessage: function() {
    return this.message;
  },
};

console.log(obj.innerMessage());
// Hello
```

```js
var obj = {
  message: 'Hello',
  innerMessage: function() {
    (function() {
      console.log(this.message);
    })();
  },
};
console.log(obj.innerMessage());
// undefined
```

```js
var obj = {
  message: 'Hello',
  innerMessage: function() {
    var self = this;
    (function() {
      console.log(self.message);
    })();
  },
};
console.log(obj.innerMessage());
// Hello
```

```js
function myFunc() {
  console.log(this.message);
}
myFunc.message = 'Hi John';

console.log(myFunc());
// undefined
```

```js
function myFunc() {
  console.log(myFunc.message);
}
myFunc.message = 'Hi John';

console.log(myFunc());
// 'Hi John'
```

```js
function myFunc() {
  myFunc.message = 'Hi John';
  console.log(myFunc.message);
}
console.log(myFunc());
// 'Hi John'
```

```js
function myFunc(param1, param2) {
  console.log(myFunc.length);
}
console.log(myFunc());
console.log(myFunc('a', 'b'));
console.log(myFunc('a', 'b', 'c', 'd'));
// 2 2 2
```

```js
function myFunc() {
  console.log(arguments.length);
}
console.log(myFunc());
console.log(myFunc('a', 'b'));
console.log(myFunc('a', 'b', 'c', 'd'));
// 0 2 4
```

```js
function Person(name, age) {
  this.name = name || 'John';
  this.age = age || 24;
  this.displayName = function() {
    console.log(this.name);
  };
}

Person.name = 'John';
Person.displayName = function() {
  console.log(this.name);
};

var person1 = new Person('John');
person1.displayName();
Person.displayName();

// John Person
```

### 作用域

```js
var foo = 'Hello';
(function() {
  var bar = ' World';
  alert(foo + bar);
})();
alert(foo + bar);

// "Hello World" 和 ReferenceError: bar is not defined
```
