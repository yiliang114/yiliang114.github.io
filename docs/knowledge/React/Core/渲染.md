---
title: 懒加载的实现原理
date: '2020-10-26'
draft: true
---

### 如何在调整浏览器大小时重新渲染视图?

     你可以在 `componentDidMount()` 中监听 `resize` 事件，然后更新尺寸（`width` 和 `height`）。你应该在 `componentWillUnmount()` 方法中移除监听。

     ```javascript
     class WindowDimensions extends React.Component {
       componentWillMount() {
         this.updateDimensions()
       }

       componentDidMount() {
         window.addEventListener('resize', this.updateDimensions)
       }

       componentWillUnmount() {
         window.removeEventListener('resize', this.updateDimensions)
       }

       updateDimensions() {
         this.setState({width: $(window).width(), height: $(window).height()})
       }

       render() {
         return <span>{this.state.width} x {this.state.height}</span>
       }
     }
     ```

### 当组件重新渲染时顺序执行的方法有哪些?

     更新可能由属性或状态的更改引起。在重新渲染组件时，会按以下顺序调用下列方法。

     static getDerivedStateFromProps()
     shouldComponentUpdate()
     render()
     getSnapshotBeforeUpdate()
     componentDidUpdate()

### React 的批量更新机制 BatchUpdates？

[从源码全面剖析 React 组件更新机制](https://segmentfault.com/a/1190000014442208)

### forceUpdate 经历了哪些生命周期，子组件呢?

forceUpdate()将会经历：

- componentWillUpdate
- render
- componentDidUpdate
  调用 forceUpdate() 将会导致 render() 方法在相应的组件上被调用，并且子级组件也会调用自己的 render()，但是如果标记改变了，那么 React 仅会更新 DOM。

通常情况下，应该尽量避免所有使用 forceUpdate() 的情况，在 render() 中仅从 this.props 和 this.state 中读取数据。这会使应用大大简化，并且更加高效
