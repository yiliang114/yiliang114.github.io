---
layout: CustomPages
title: 基础
date: 2020-11-21
aside: false
draft: true
---

### 描述伪元素及其用途。

CSS 伪元素是添加到选择器的关键字，去选择元素的特定部分。它们可以用于装饰（`:first-line`，`:first-letter`）或将元素添加到标记中（与 content:...组合），而不必修改标记（`:before`，`:after`）。

- `:first-line`和`:first-letter`可以用来修饰文字。
- 上面提到的`.clearfix`方法中，使用`clear: both`来添加不占空间的元素。
- 使用`:before`和`after`展示提示中的三角箭头。鼓励关注点分离，因为三角被视为样式的一部分，而不是真正的 DOM。如果不使用额外的 HTML 元素，只用 CSS 样式绘制三角形是不太可能的。

### `:before`和`:after`的区别？都用来做什么？

`::before` 和`::after` 都是伪元素。

是在元素前后插入生成内容。如果是插入一张图片，插入一段文字，或者做一个小三角等等

- 在 CSS 中伪类一直用 : 表示，如 :hover, :active 等
- 伪元素在 CSS1 中已存在，当时语法是用 : 表示，如 :before 和 :after
- 后来在 CSS3 中修订，伪元素用 :: 表示，如 ::before 和 ::after，以此区分伪元素和伪类
- 由于低版本 IE 对双冒号不兼容，开发者为了兼容性各浏览器，继续使使用 :after 这种老语法表示伪元素
- 综上所述：::before 是 CSS3 中写伪元素的新语法； :after 是 CSS1 中存在的、兼容 IE 的老语法

Pseudo-element 不占用 dom 元素节点，:before 和:after 常用于清除浮动, 具体做法就是给浮动元素的父元素定义伪类

```html
<div class="father">
  <div class="f">
    我是浮动的
    <div>
      <div>
        <style>
          .father:after {
            clear: both;
            content: '';
            height: 0;
            visibility: hidden;
            display: block;
          }
        </style>
      </div>
    </div>
  </div>
</div>
```

### ::before 和 :after 中双冒号和单冒号 有什么区别？解释一下这 2 个伪元素的作用

在实际的开发工作中，我们会看到有人把伪元素写成:after，这实际是 CSS2 与 CSS3 新旧标准的规定不同而导致的。
CSS2 中的伪元素使用 1 个冒号，在 CSS3 中，为了区分伪类和伪元素，规定伪元素使用 2 个冒号。所以，对于 CSS2 标准的老伪元素，比如:first-line，:first-letter，:before，:after，写一个冒号浏览器也能识别，但对于 CSS3 标准的新伪元素，比如::selection，就必须写 2 个冒号了。

- 单冒号(:)用于 CSS3 伪类，双冒号(::)用于 CSS3 伪元素。（伪元素由双冒号和伪元素名称组成）
- 双冒号是在当前规范中引入的，用于区分伪类和伪元素。不过浏览器需要同时支持旧的已经存在的伪元素写法
- 比如:first-line、:first-letter、:before、:after 等，而新的在 CSS3 中引入的伪元素则不允许再支持旧的单冒号的写法。
- 想让插入的内容出现在其它内容前，使用::before，否者，使用::after；在代码顺序上，::after 生成的内容也比::before 生成的内容靠后。
- 如果按堆栈视角，::after 生成的内容会在::before 生成的内容之上

### a 标签上四个伪类的执行顺序是怎么样的？

`link > visited > hover > active`

- L-V-H-A love hate 用喜欢和讨厌两个词来方便记忆

link > visited > hover > active
简称 lvha(love-ha)

伪类的特殊性（应用优先级）是同样的，所以后出现的伪类会覆盖先出现的伪类（同时激活）

在这里，比如把 hover 放在 active 后面，那么实际你在激活（active）链接的时候就触发了 hover 伪类，hover 在后面覆盖了 active 的颜色，所以始终无法看到 active 的颜色

### 伪元素和伪类的区别？说一个常用的伪元素？说一个常用的伪类？

伪元素为 DOM 树没有定义的虚拟元素。不同于其他选择器，它不以元素为最小选择单元，它选择的是元素指定内容。比如::before 表示选择元素内容的之前内容，::selection 表示选择元素被选中的内容。

伪元素的效果可以通过添加实际的元素来实现。

伪类用于选择 DOM 树之外的信息，或是不能用简单选择器进行表示的信息。前者包含那些匹配指定状态的元素，比如:visited，:active；后者包含那些满足一定逻辑条件的 DOM 树中的元素，比如:first-child，:first-of-type，：target。

伪类的效果可以通过添加实际的类来实现。

#### 伪元素和伪类的区别？

- 伪元素修改为以::开头；伪类以:开头
- 伪类与伪元素的本质区别就是是否抽象创造了新元素
- 伪元素在一个选择器中只能出现一次，并且只能出现在末尾

#### 相同

- 伪类与伪元素都是用于向选择器加特殊效果
- 伪类与伪元素优先级分别与类、标签优先级相同

#### 详细介绍

- 什么是伪类

```html
<p>
  <em>This</em>
  <em>is a text</em>
</p>
```

如果我们想要第一个 em 标签字体颜色变红怎么做呢?

使用我们熟悉的伪类很简单

```css
em:first-child {
  color: red;
}
```

> 表示选择的元素既要是 em 标签，同时要是其父元素的第一个子元素，不要错误认为是表示 em 元素的第一个子元素

但是如果不存在伪类我们怎么做呢

这是我们就需要为第一个 em 标签添加类

```html
<p>
  <em class="first-child">This</em>
  <em>is a text</em>
</p>

em.first-child { color: red; }
```

- 什么是伪元素

现在我想让这个段落的第一个字母变红</br>
怎么做呢</br>
这回我们需要使用伪元素</br>

```css
p::first-letter {
  color: red;
}
```

同样假设伪元素不存在的情况 </br>
这时我们只能嵌套 span 标签来实现

```html
<p>
  <em><span>T</span>his</em>
  <em>is a text</em>
</p>
```

```css
p span {
  color: red;
}
```

#### 常用

伪元素

| Selector       | Meaning                        | CSS |
| -------------- | ------------------------------ | --- |
| ::first-letter | 选择指定元素的第一个单词       | 1   |
| ::first-line   | 选择指定元素的第一行           | 1   |
| ::after        | 在指定元素的内容前面插入内容   | 2   |
| ::before       | 在指定元素的内容后面插入内容   | 2   |
| ::selection    | 选择指定元素中被用户选中的内容 | 3   |

伪类

| Selector             | Meaning                                        | CSS |
| -------------------- | ---------------------------------------------- | --- |
| :active              | 选择正在被激活的元素                           | 1   |
| :hover               | 选择被鼠标悬浮着元素                           | 1   |
| :link                | 选择未被访问的元素                             | 1   |
| :visited             | 选择已被访问的元素                             | 1   |
| :first-child         | 选择满足是其父元素的第一个子元素的元素         | 2   |
| :lang                | 选择带有指定 lang 属性的元素                   | 2   |
| :focus               | 选择拥有键盘输入焦点的元素                     | 2   |
| :enable              | 选择每个已启动的元素                           | 3   |
| :disable             | 选择每个已禁止的元素                           | 3   |
| :checked             | 选择每个被选中的元素                           | 3   |
| :target              | 选择当前的锚点元素                             | 3   |
| :first-of-type       | 选择满足是其父元素的第一个某类型子元素的元素   | 3   |
| :last-of-type        | 选择满足是其父元素的最后一个某类型子元素的元素 | 3   |
| :only-of-type        | 选择满足是其父元素的唯一一个某类型子元素的元素 | 3   |
| :nth-of-type(n)      | 选择满足是其父元素的第 n 个某类型子元素的元素  | 3   |
| :nth-last-of-type(n) | 选择满足是其父元素的倒数第 n 个某类型的元素    | 3   |
| :only-child          | 选择满足是其父元素的唯一一个子元素的元素       | 3   |
| :last-child          | 选择满足是其父元素的最后一个元素的元素         | 3   |
| :nth-child(n)        | 选择满足是其父元素的第 n 个子元素的元素        | 3   |
| :nth-last-child(n)   | 选择满足是其父元素的倒数第 n 个子元素的元素    | 3   |
| :empty               | 选择满足没有子元素的元素                       | 3   |
| :in-range            | 选择满足值在指定范围内的元素                   | 3   |
| :out-of-range        | 选择值不在指定范围内的元素                     | 3   |
| :invalid             | 选择满足值为无效值的元素                       | 3   |
| :valid               | 选择满足值为有效值的元素                       | 3   |
| :not(selector)       | 选择不满足 selector 的元素                     | 3   |
| :optional            | 选择为可选项的表单元素，即没有“required”属性   | 3   |
| :read-only           | 选择有"readonly"的表单元素                     | 3   |
| :read-write          | 选择没有"readonly"的表单元素                   | 3   |
| :root                | 选择根元素                                     | 3   |

### 伪元素和伪类的区别和作用？

伪元素:在内容元素的前后插入额外的元素或样式，但是这些元素实际上并不在文档中生成。它们只在外部显示可见，但不会在文档的源代码中找到它们，因此，称为“伪”元素。例如：

```css
p::before {
  content: '第一章：';
}
p::after {
  content: 'Hot!';
}
p::first-line {
  background: red;
}
p::first-letter {
  font-size: 30px;
}
```

伪类: 将特殊的效果添加到特定选择器上。它是已有元素上添加类别的，不会产生新的元素。例如：

```css
a:hover {
  color: #ff00ff;
}
p:first-child {
  color: red;
}
```

### 伪类和伪元素区别

- 伪类值一种状态 比如:hover
- 伪元素是一个真实存在的元素，他可以有样式有内容

### 在 HTML 文本中，伪类`:root`总是指向`html`元素？

A: 不是（答案中给出了是 ==||）。以下摘自知乎[:root 与 html 在 CSS3 中指的是同一个元素吗？](http://www.zhihu.com/question/20312140)的答案：

> 单指创建的根。这个根可能不是 html ，如果是片段 html，没有创建根，则为片段的根。把这下面 URL 打到支持 data URL 的瀏覽器看看（Firefox, Chrome, Safari, Opera），可见一斑：

```html
data:application/xhtml+xml,
<div xmlns="http://www.w3.org/1999/xhtml">
  <style>
    :root {
      background: green;
    }
    html {
      background: red !important;
    }
  </style>
</div>
```

### CSS3 新增伪类举例：

```css
  p:first-of-type 选择属于其父元素的首个 <p> 元素的每个 <p> 元素。
  p:last-of-type  选择属于其父元素的最后 <p> 元素的每个 <p> 元素。
  p:only-of-type  选择属于其父元素唯一的 <p> 元素的每个 <p> 元素。
  p:only-child    选择属于其父元素的唯一子元素的每个 <p> 元素。
  p:nth-child(2)  选择属于其父元素的第二个子元素的每个 <p> 元素。
  :enabled  :disabled 控制表单控件的禁用状态。
  :checked        单选框或复选框被选中。
```

### 伪类

用来指定一个或者与其相关的选择符的状态
first-child 伪类
focus

### 锚伪类

活动状态，已被访问状态，未被访问状态，和鼠标悬停状态。

```
a:link {color: #FF0000}		/* 未访问的链接 */
a:visited {color: #00FF00}	/* 已访问的链接 */
a:hover {color: #FF00FF}	/* 鼠标移动到链接上 */
a:active {color: #0000FF}	/* 选定的链接 */
```

### 请描述伪元素 (pseudo-elements) 及其用途。

伪类用于当已有元素处于的某个状态时，为其添加对应的样式，这个状态是根据用户行为而动态变化的。
伪元素用于创建一些不在文档树中的元素，并为其添加样式。

区别：伪类的操作对象是文档树中已有的元素，而伪元素则创建了一个文档数外的元素。因此，伪类与伪元素的区别在于：有没有创建一个文档树之外的元素

### nth-child(n) VS nth-of-type(n)

ele: nth-child(n) 选择器有两个必要条件： 1. 必须是 ele 元素。 2. 必须是处于第 n 个子元素的位置；否则，选不到元素的

ele: nth-of-type(n)选择器只有一个条件： 第 n 个 ele 元素

### ::after

这里拿个简单的例子来看，我们要画一个放大镜，如下图：

分析一下，这个放大镜可以由两个 div 组成，一个是黑色的圆环，一个是黑色把手（旋转 45 度）。所以我们就需要用两个 div 来实现吗？答案是 NO，一个 div 也是可以的，我们可以借助`::after`来添加一个元素。同理如果需要三个 div，我们还可以使用`::before`再添加一个元素。下面看一下代码：

```
div {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 5px solid #333;
    position: relative;
}
div::after {
    content: '';
    display: block;
    width: 8px;
    height: 60px;
    border-radius: 5px;
    background: #333;
    position: absolute;
    right: -22px;
    top: 38px;
    transform: rotate(-45deg);
}
```

### attr 和 content

比如我们要实现一个悬浮提示的功能。传统方法，使用 title 属性就能实现，但是现在我们要更美观，可以使用 css3 提供的`attr：能够在css中获取到元素的某个属性值，然后插入到伪元素的content中去。`

假如我们的 html 代码如下：

```html
<div data-title="hello, world">hello...</div>
```

我们来看看实现这个插件的 css 代码：

```css
div {
  position: relative;
}
div:hover::after {
  /* 取到data-title属性的值 */
  content: attr(data-title);
  display: inline-block;
  padding: 10px 14px;
  border: 1px solid #ddd;
  border-radius: 5px;
  position: absolute;
  top: -50px;
  left: -30px;
}
```

当 hover 的时候，在元素尾部添加一个内容为 data-title 属性值的元素，所以就实现了 hover 显示的效果，如下图所示：
