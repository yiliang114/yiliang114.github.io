---
title: 布局
date: 2020-11-21
aside: false
draft: true
---

### 一个高度自适应的 div，里面有两个 div，一个高度 100px，希望另一个填满剩下的高度

1. .sub { height: calc(100%-100px); }
2. .container { position:relative; } .sub { position: absolute; top: 100px; bottom: 0; }
3. .container { display:flex; flex-direction:column; } .sub { flex:1; }

### 三栏布局，中间自适应

假设高度默认`100px` ，请写出三栏布局，其中左栏、右栏各为`300px`，中间自适应。

1. 浮动
2. 绝对定位
3. `flex box`。移动开发里经常用到。
4. 表格布局`table`。虽然已经淘汰了，但也应该了解。
5. 网格布局 `grid`

#### 方法 1、浮动：

> 左侧设置左浮动，右侧设置右浮动即可，中间会自动地自适应。TODO: 中间应该也需要浮动吧 ？

#### 方法 2、绝对定位：

> 左侧设置为绝对定位， `left：0px`。右侧设置为绝对定位， `right：0px`。中间设置为绝对定位，`left`和`right` 都为`300px`，即可。中间的宽度会自适应。

> 使用`article`标签作为容器，包裹左、中、右三个部分。

> 方法 1 和方法 2 的代码如下：

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
      html * {
        padding: 0px;
        margin: 0px;
      }

      .layout {
        margin-bottom: 150px;
      }

      .layout article div {
        /*注意，这里是设置每个小块儿的高度为100px，而不是设置大容器的高度。大容器的高度要符合响应式*/
        height: 100px;
      }

      /* 方法一 start */

      .layout.float .left {
        float: left;
        width: 300px;
        background: red;
      }

      .layout.float .right {
        float: right;
        width: 300px;
        background: blue;
      }

      .layout.float .center {
        background: green;
      }

      /* 方法一 end */

      /* 方法二 start */
      .layout.absolute .left-center-right {
        position: relative;
      }

      .layout.absolute .left {
        position: absolute;
        left: 0;
        width: 300px;
        background: red;
      }

      /* 【重要】中间的区域，左侧定位300px，右侧定位为300px，即可完成。宽度会自使用 */
      .layout.absolute .center {
        position: absolute;
        left: 300px;
        right: 300px;
        background: green;
      }

      .layout.absolute .right {
        position: absolute;
        right: 0;
        width: 300px;
        background: blue;
      }

      /* 方法二 end */
    </style>
  </head>

  <body>
    <!-- 方法一：浮动 start -->
    <!-- 输入 section.layout.float，即可生成  -->
    <section class="layout float">
      <!-- 用  article 标签包裹左、中、右三个部分 -->
      <article class="left-right-center">
        <!-- 输入 div.left+div.right+div.center，即可生成 -->
        <div class="left">
          我是 left
        </div>
        <div class="right">
          我是 right
        </div>
        <div class="center">
          浮动解决方案 我是 center
        </div>
      </article>
    </section>
    <!-- 方法一：浮动 end -->

    <section class="layout absolute">
      <article class="left-center-right">
        <div class="left">
          我是 left
        </div>
        <div class="right">
          我是 right
        </div>
        <div class="center">
          <h1>绝对定位解决方案</h1>
          我是 center
        </div>
      </article>
    </section>
  </body>
</html>
```

效果如下：

![](http://img.smyhvae.com/20180305_1640.gif)

#### 方法 3、flex box 布局

> 将左中右所在的容器设置为`display: flex`，设置两侧的宽度后，然后让中间的`flex = 1`，即可。

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
      html * {
        padding: 0;
        margin: 0;
      }

      .layout article div {
        height: 100px;
      }

      .left-center-right {
        display: flex;
      }

      .layout.flex .left {
        width: 300px;
        background: red;
      }

      .layout.flex .center {
        flex: 1;
        background: green;
      }

      .layout.flex .right {
        width: 300px;
        background: blue;
      }
    </style>
  </head>

  <body>
    <section class="layout flex">
      <article class="left-center-right-">
        <div class="left">
          我是 left
        </div>
        <div class="center">
          <h1>flex布局解决方案</h1>
          我是 center
        </div>
        <div class="right">
          我是 right
        </div>
      </article>
    </section>
  </body>
</html>
```

效果如下：

![](http://img.smyhvae.com/20180305_1700.gif)

#### 方法 4、表格布局 table

> 设置整个容器的宽度为`100%`，设置三个部分均为表格，然后左边的单元格为 `300px`，右边的单元格为 `300px`，即可。中间的单元格会自适应。

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
      html * {
        padding: 0;
        margin: 0;
      }

      .layout.table div {
        height: 100px;
      }

      /* 重要：设置容器为表格布局，宽度为100% */
      .layout.table .left-center-right {
        width: 100%;
        display: table;
        height: 100px;
      }

      .layout.table .left-center-right div {
        display: table-cell; /* 重要：设置三个模块为表格里的单元*/
      }

      .layout.table .left {
        width: 300px;
        background: red;
      }

      .layout.table .center {
        background: green;
      }

      .layout.table .right {
        width: 300px;
        background: blue;
      }
    </style>
  </head>

  <body>
    <section class="layout table">
      <article class="left-center-right">
        <div class="left">
          我是 left
        </div>
        <div class="center">
          <h1>表格布局解决方案</h1>
          我是 center
        </div>
        <div class="right">
          我是 right
        </div>
      </article>
    </section>
  </body>
</html>
```

![](http://img.smyhvae.com/20180305_1855.gif)

#### 方法 5、网格布局 grid

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
      html * {
        padding: 0;
        margin: 0;
      }

      /* 重要：设置容器为网格布局，宽度为100% */
      .layout.grid .left-center-right {
        display: grid;
        width: 100%;
        grid-template-rows: 100px;
        grid-template-columns: 300px auto 300px; /* 重要：设置网格为三列，并设置每列的宽度。即可。*/
      }

      .layout.grid .left {
        background: red;
      }

      .layout.grid .center {
        background: green;
      }

      .layout.grid .right {
        background: blue;
      }
    </style>
  </head>

  <body>
    <section class="layout grid">
      <article class="left-center-right">
        <div class="left">
          我是 left
        </div>
        <div class="center">
          <h1>网格布局解决方案</h1>
          我是 center
        </div>
        <div class="right">
          我是 right
        </div>
      </article>
    </section>
  </body>
</html>
```

效果：

![](http://img.smyhvae.com/20180305_1920.gif)

#### 延伸：五种方法的对比

> 五种方法的优缺点

- 考虑中间模块的高度问题
- 兼容性问题：实际开发中，哪个最实用？

方法 1：浮动：

- 优点：兼容性好。
- 缺点：浮动会脱离标准文档流，因此要清除浮动。我们解决好这个问题即可。

方法:2：绝对定位

- 优点：快捷。
- 缺点：导致子元素也脱离了标准文档流，可实用性差。

方法 3：flex 布局（CSS3 中出现的）

- 优点：解决上面两个方法的不足，flex 布局比较完美。移动端基本用 flex 布局。

方法 4：表格布局

- 优点：表格布局在很多场景中很实用，兼容性非常好。因为 IE8 不支持 flex，此时可以尝试表格布局
- 缺点：因为三个部分都当成了**单元格**来对待，此时，如果中间的部分变高了，其会部分也会被迫调整高度。但是，在很多场景下，我们并不需要两侧的高度增高。

> 什么时候用 `flex`布局 or 表格布局，看具体的场景。二者没有绝对的优势，也没有绝对的不足。

方法 5：网格布局

- CSS3 中引入的布局，很好用。代码量简化了很多。

> PS：面试提到网格布局，说明我们对新技术是有追求的。

#### 延伸：如果题目中去掉高度已知

> 问题：题目中，如果去掉高度已知，我们往中间的模块里塞很多内容，让中间的模块撑开。会发生什么变化？哪个布局就不能用了？

分析：其实可以这样理解，我们回去看上面的动画效果，当中间的模块变得很挤时，会发生什么效果？就是我们想要的答案。

> 答案是：**flex 布局和表格布局可以通用**，其他三个布局都不能用了。

### 使用 flex 实现三栏布局，两边固定，中间自适应

这就是圣杯布局,也叫双飞翼布局

1. 把 center 放在最前面，优先渲染
2. 相对定位 relative 也是可以设置 left,right 等值的
3. margin 负值的了解和使用
4. float 真的不建议使用

现在的 flex/grid 很轻松就能实现，甚至绝对定位也是很容易实现也更容易理解。

作用：圣杯布局和双飞翼布局解决的问题是一样的，就是两边顶宽，中间自适应的三栏布局，中间栏要在放在文档流前面以优先渲染。
   区别：圣杯布局，为了中间 div 内容不被遮挡，将中间 div 设置了左右 padding-left 和 padding-right 后，将左右两个 div 用相对布局 position: relative 并分别配合 right 和 left 属性，以便左右两栏 div 移动后不遮挡中间 div。双飞翼布局，为了中间 div 内容不被遮挡，直接在中间 div 内部创建子 div 用于放置内容，在该子 div 里用 margin-left 和 margin-right 为左右两栏 div 留出位置。

圣杯布局代码：

```html
<body>
  <div id="hd">header</div>
  <div id="bd">
    <div id="middle">middle</div>
    <div id="left">left</div>
    <div id="right">right</div>
  </div>
  <div id="footer">footer</div>
</body>

<style>
  #hd {
    height: 50px;
    background: #666;
    text-align: center;
  }
  #bd {
    /*左右栏通过添加负的margin放到正确的位置了，此段代码是为了摆正中间栏的位置*/
    padding: 0 200px 0 180px;
    height: 100px;
  }
  #middle {
    float: left;
    width: 100%; /*左栏上去到第一行*/
    height: 100px;
    background: blue;
  }
  #left {
    float: left;
    width: 180px;
    height: 100px;
    margin-left: -100%;
    background: #0c9;
    /*中间栏的位置摆正之后，左栏的位置也相应右移，通过相对定位的left恢复到正确位置*/
    position: relative;
    left: -180px;
  }
  #right {
    float: left;
    width: 200px;
    height: 100px;
    margin-left: -200px;
    background: #0c9;
    /*中间栏的位置摆正之后，右栏的位置也相应左移，通过相对定位的right恢复到正确位置*/
    position: relative;
    right: -200px;
  }
  #footer {
    height: 50px;
    background: #666;
    text-align: center;
  }
</style>
```

双飞翼布局代码：

```html
<body>
  <div id="hd">header</div>
  <div id="middle">
    <div id="inside">middle</div>
  </div>
  <div id="left">left</div>
  <div id="right">right</div>
  <div id="footer">footer</div>
</body>

<style>
  #hd {
    height: 50px;
    background: #666;
    text-align: center;
  }
  #middle {
    float: left;
    width: 100%; /*左栏上去到第一行*/
    height: 100px;
    background: blue;
  }
  #left {
    float: left;
    width: 180px;
    height: 100px;
    margin-left: -100%;
    background: #0c9;
  }
  #right {
    float: left;
    width: 200px;
    height: 100px;
    margin-left: -200px;
    background: #0c9;
  }

  /*给内部div添加margin，把内容放到中间栏，其实整个背景还是100%*/
  #inside {
    margin: 0 200px 0 180px;
    height: 100px;
  }
  #footer {
    clear: both; /*记得清楚浮动*/
    height: 50px;
    background: #666;
    text-align: center;
  }
</style>
```

#### flex 布局

```html
<head>
  <style>
    .container {
      border: 1px solid black;
      width: 100vw;
      height: 100vh;

      display: flex;
      flex-direction: row;
      justify-content: space-between;
    }

    .item {
      border: 1px solid red;
      height: 100%;
    }

    .left {
      width: 100px;
    }

    .right {
      flex: 1;
    }
  </style>
</head>

<body class="container">
  <div class="item left">100px宽</div>
  <div class="item right">自适应</div>
</body>
```

非 flex 布局方式

```html
<html>
  <head>
    <meta charset="utf-8" />
    <title>test.html</title>
    <style>
      .container {
        border: 1px solid black;
        width: 100vw;
        height: 100vh;
      }

      .item {
        border: 1px solid red;
        height: 100%;
      }

      .left {
        float: left;
        width: 100px;
      }

      .right {
        margin: 0 0 0 100px;
      }
    </style>
  </head>

  <body class="container">
    <div class="item left">100px宽</div>
    <div class="item right">自适应</div>
  </body>
</html>
```
