---
title: 懒加载的实现原理
date: '2020-10-26'
draft: true
---

## vue 进阶

1. 自己搭建脚手架
2. vuejs-templates 与脚手架的区别是什么
3. 如何提高打包的速度。

### TODO: bug

好像在 data 函数中直接 emit 的事件，不会再 devtools 中显示出来。

### vue 等单页应用的路由缓存

- 部署的缓存： nginx
  - https://www.cnblogs.com/qixidi/p/10245535.html
- 列表页进入详情页，详情页返回上一页的时候 需要重新加载数据。。。
  - https://blog.csdn.net/llf1991/article/details/80003762
  - https://www.zhihu.com/question/52976714

### vue 下拉刷新的实现

### vue 虚拟列表

## cli

### 项目 常见问题

- 输入框中文输入法下的回车事件
- ff 的默认事件
- vue 为什么不支持低版本的浏览器
- 浏览器内核举例
- vue @ 3 支持到什么版本
- 引入的小图片为什么被渲染成了 base64
  - 这个是 webpack 里面的对应插件处理的.对于小于多少 K 以下的图片(规定的格式)直接转为 base64 格式渲染;具体配置在 webpack.base.conf.js 里面的 rules 里面的 url-loader 这样做的好处:在网速不好的时候先于内容加载和减少 http 的请求次数来减少网站服务器的负担
- CSSbackground 引入图片打包后,访问路径错误：因为打包后图片是在根目录下,你用相对路径肯定报错啊… 你可以魔改 webpack 的配置文件里面的 static 为./static…但是不建议。你若是把图片什么丢到 assets 目录下,然后相对路径,打包后是正常的
- 反向代理与正向代理的区别
- lock 文件的作用：lock 文件的作用是统一版本号， 锁版本。 不然不同的人，不同的时间安装的包可能不一样
- package.json 里面的 dependencies 和 devDependencies 的差异
- fonticon 的原理
- setTimeout、Promise、Async/Await 的区别
- react-router 里的 <Link> 标签和 标签有什么区别? Link 的本质也是 a 标签。只不过在 Link 中禁用了 a 标签的默认事件，改用了 history 对象提供的方法进行跳转。
- vue 中的 ref 是什么？ref 被用来给元素或子组件注册引用信息。引用信息将会注册在父组件的 \$refs 对象上。如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例。

https://juejin.im/post/5d59f2a451882549be53b170

- router 的哈希模式与 history 有什么不同，hash 值能被监听改变么？
- JSON.stringify 和 JSON.parse() 不足之处
- 页面预渲染（seo 优化问题） https://www.cnblogs.com/Lovebugs/p/8759741.html
- webpack 插件、loader
- webpack plugins 与 module 之类的区别
- webpack 的热重载
- .native 事件

https://github.com/Advanced-Frontend/Daily-Note-Question/issues/308
https://blog.csdn.net/qdmoment/article/details/89455938

### vue-cli 环境变量

会自动引入 VUE_APP 开头的环境变量， 以及 NODE_ENV 但是需要注意的是，NODE_ENV 如果通过使用 env 之后 build 就不会自动注入设置为 production 了。。。 探究一下

### vue-cli@3 的 cdn 打包处理

包大小分析：https://cli.vuejs.org/zh/guide/cli-service.html#%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4

https://www.jianshu.com/p/d1fb954f5713

https://www.jianshu.com/p/9d6c1efebcd9

### vue 渲染大量数据时应该怎么优化？

Object.freeze 冻结对象，不让 vue 劫持. 以及使用 虚拟列表

### vue 如何优化首页的加载速度？vue 首页白屏是什么问题引起的？如何解决呢？

首页白屏的原因：
单页面应用的 html 是靠 js 生成，因为首屏需要加载很大的 js 文件(app.js vendor.js)，所以当网速差的时候会产生一定程度的白屏

解决办法：

优化 webpack 减少模块打包体积，code-split 按需加载
服务端渲染，在服务端事先拼装好首页所需的 html
首页加 loading 或 骨架屏 （仅仅是优化体验）

### 为什么 for 循环嵌套顺序会影响性能？

```js
var t1 = new Date().getTime();
for (let i = 0; i < 100; i++) {
  for (let j = 0; j < 1000; j++) {
    for (let k = 0; k < 10000; k++) {}
  }
}
var t2 = new Date().getTime();
console.log('first time', t2 - t1);

for (let i = 0; i < 10000; i++) {
  for (let j = 0; j < 1000; j++) {
    for (let k = 0; k < 100; k++) {}
  }
}
var t3 = new Date().getTime();
console.log('two time', t3 - t2);
```

应该是第一个时间少一点，比如，按照每次循环判断来说 （初始化 自增次数类似）

1. i 会循环 100 次，判断 i<100 100 次
   j 会循环 100 _ 1000 次，判断 j<100 100 _ 1000 次
   k 会循环 100 _ 1000 _ 10000 次，判断 k<100 100 _ 1000 _ 10000 次

2. i 会循环 10000 次，判断 i<100 10000 次
   j 会循环 10000 _ 1000 次，判断 j<100 10000 _ 1000 次
   k 会循环 100 _ 1000 _ 10000 次， 判断 k<100 100 _ 1000 _ 10000 次

虽然判断 k<100 的次数都是一样的 但是前面两种判断就不一样了，由此可以看见时间长短。

### webpack 打包 vue 速度太慢怎么办？

1.使用`webpack-bundle-analyzer`对项目进行模块分析生成 report，查看 report 后看看哪些模块体积过大，然后针对性优化，比如我项目中引用了常用的 UI 库 element-ui 和 v-charts 等

2.配置 webpack 的`externals`，官方文档的解释：防止将某些`import`的包(package)打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展依赖。
所以，可以将体积大的库分离出来：

```
// ...
externals: {
    'element-ui': 'Element',
    'v-charts': 'VCharts'
}
```

3.然后在`main.js`中移除相关库的 import

4.在`index.html`模板文件中，添加相关库的`cdn`引用，如：

```html
<script src="https://unpkg.com/element-ui@2.10.0/lib/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/v-charts/lib/index.min.js"></script>
```

经过以上的处理，再尝试编译打包，会发现速度快了一些。
有什么更好的方式或不对的地方欢迎指出
