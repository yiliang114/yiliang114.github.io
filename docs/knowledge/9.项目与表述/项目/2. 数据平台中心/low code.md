---
title: low code
date: 2020-11-21
draft: true
---

# low code

要有价值才做，而不是为了能做而做!!!

1. 为什么要有这个东西？ 背景是什么
2. 怎么做的
3. 中间遇到了什么问题，怎么解决的
4. 成果是什么

## 配置

### 1. ui

属性名：

- is
- props
- on
- `$attrs`
- `$listener`
- children

关键词：

- JSX
- 可视化搭建
- 组件传参

### 2. dataOptions

属性名：

- Id
- Config
- Order
- Fields
- Filters
- Variables

关键词：

- Id 映射到实际的表名
- Node 开发完成之后给到一份协议文档

## 前端

要点：

1. 沉淀组件库
2. markdown-demo-loader
3. 如何提高组件、项目开发环境的编译速度。

## 开发流程

1. 总的一个配置文件。 一份配置文件，对应一个 App
2. auth 接口登录， 拉取 tabs, tabbars 的权限，从 App Config 中筛选拼接出当前角色的 Config
3. 动态注册路由，addRoute。 其他的前端项目一般会考虑，全部路由都注册， 但是通过 router 的 meta 携带参数来判断页面是否有权限。 这样子，前后端都需要维护一份角色、权限的配置信息。 另外一个用户可能包含多个角色，每次做一次筛选也不方便。这样做至少只需要维护一份权限配置即可。
4. atomConfig to chart

## 优点

1. 开发更快
2. 开发流程更快，各部分人力沟通成本小，各方面工作量都减少了。

## 不足

1. 开发环境下，可能就是这么直接用 Node 从结果库中取数据了。 一般如果宽表不是很大的话，速度慢的没有那么明显，但是如果没有优先处理好输出，直接这样拿出来的数据就会很大。
2. 部分接口是实时 SQL， 目前的缓存策略，较为暴力。
3. 取数任务服务会经过 redis 缓存，定时任务 mock 角色来预加载缓存，但是因为页面越来越多，定时任务 mock 所有角色跑所有页面的数据也不是很科学，未命中 cache 的话， 速度就会很慢。优化措施如下：
   1. 底表接着分库分表。
4. 开发环境下， 无法做到颗粒度很细的 render ？？？ 常常因为修改了一个图块的配置信息，而导致整个页面都重新加载了。

## （前端）难点

主要一块还是在数据通信。 因为换了几波产品经理、几波设计，会有多种场景的数据交互：

1. 一个页面多个图表，公用同一个数据源，同一个筛选条件，也可能不同的筛选条件
2. 多个页面共享一个筛选条件
3. 同个页面，有多个触发重新取数的操作。
4. 每个月固定跑数，一开始需要人工打开配置开关。
   1. 配置中心配置。 开发得到产品的指令， 手动配置。 开关开启、关闭，开发会对线上环境负责。
   2. 工作表配置。 project 颗粒度的权限，交给产品自己配置。产品权限太大， 不会关注、测试所有的模块，这是一个隐患。
   3. 上面都是人工手动进行修改。 这边是希望能够跟企业微信机器人打通，通过 api 的形式去处理。

## 渲染加速

1. 虚拟列表
2. 数据懒加载
