---
title: 遇到的问题
date: 2020-11-21
aside: false
draft: true
---

## 功能类

### 驾驶舱的顶部 Tab 渲染同 ID 的 Item 的顺序错乱现象

对于一个 Tab 组件，传入的一个元素是 Tab 对象的数组，渲染一个 Tabs 列表。 数据举例如下：

```js
const A = [0, 1, 2, 3];

const B = [0, 1, 2];
```

对于 A B 两个数组， 最后一个元素的 Id 相等，前面的 Id 都不同。在切换 Tabs 的过程中，就是替换 A B 数组的值。但是每次切换的过程中，最后一个 Tab 位置总是会跑到第一位（首次渲染的位置相同。）， 后来想了一下这个原因是因为 Vue 在增加删除节点的时候，相同的 Key 的元素，就当做旧元素，已经消失的 Key 元素，节点会被删除；而原本不存在的节点，会被作为新 Key 插入到后面。 这就是为什么，最后一个 Tab 元素在切换过程中跑到最前面去的原因，这里只要改一下，用不同的 Key 值即可。

### 页面跳转之前的请求没有结束，会被 cancel

https://segmentfault.com/a/1190000013132078

日志上报的失败率比较高，很多都是直接被 cancel (abort) 调的。

使用 `navigator.sendBeacon` 打点上报有一个好处， 对于页面直接跳转的情况，也能上报数据，而不会被 cancel。 所以 navigator.sendBeacon 的部分，其实并不需要 await 它，正常写同步的顺序就好。

### 正则匹配中文出错

背景：如何使用正则判断字符串中是否全部是中文？
通过百度或者 google 之后得到的答案一般都是：

```
const reg = /^[\u4e00-\u9fa5]*$/
reg.test('中文')
```

但是实际上遇到了一个中文 "䃼" 的时候，正则就返回了错误。 一开始没有意识到这是一个不常见的中文，或者换句话说没有意识到不常见的中文没有落在上面的正则表达式里。在线中文转化 unicode 之后得到这个字的 unicode 编码是 "\u40fc", 看起来确实没有落在上面正则的范围里。补上一般完整的中文编码符号。https://blog.bvcode.com/res/159/

## 性能优化类

### 前端安全问题

CSRF ？？？

g_tk 算法

https://www.cnblogs.com/a849788087/p/6440264.html

http://km.oa.com/articles/show/409728

## 白屏问题排查

https://www.cnblogs.com/thinkingthigh/p/11057079.html

/authorize 白屏页

npm 包的扩展运算符。 不能在 ios 12.1 14.4 上跑起来。

## TODO: 遇到最大的问题是怎么解决的？

是这样的，具体什么困难是最让我头疼的我已经记不清了，因为遇到困难这件事本身就是客观存在的，只要一个人还在前进，就会不断遇到困难。我在学习上、生活上不断解决各种问题的过程中得出了一些经验，这些经验让我成长了很多。比如，遇到困难时一定要保持心态良好，不要气馁和沮丧。如果要做一件事情频繁遇到困难，或者遇到的困难看起来很棘手，经验告诉我，那通常是路走错了，或者还没有找到正确的解决方式。这个时候保持心态良好，不气馁就很重要了。比如：之前导师让我写一个架构的 demo，但是那个架构的技术栈很多我都没有了解过，我开始是按照任务清单挨个往下执行，但是这个过程频繁遇到很棘手的问题，于是，我觉得是我的执行方法有问题，在一个下午我花了几个小时的时间，重新整理了一下思路，我把任务分解了一下，把每个我不熟悉的模块单独拉出来，写一些和其他模块几乎完全不相干的 demo，等到所有模块都熟悉的差不多了，然后再整合起来写一个完整的流程，这样一来，这件事情就被我解决了。生活中也是一样，遇到棘手的问题，保持心态良好，冷静的去思考更好的解决方式即可。

这个问题主要考察：1、能不能清晰认知自己的错误-认知能力；2、面对挫折你做了什么-解决问题的能力；3、学习到什么，怎样避免再次出现-自我完善能力；4、顺便通过讲述观察语言有没有逻辑性。

TODO: 真实：

传统前端开发到数据前端开发的转型，成长的过程我认为是一个让人痛苦又让人兴奋的过程。来数平的前半年，差不多都在做数据应用的事情， 从行业经分系统到 low code 可视化配置的事情，基本上我作为一个前端开发需要关注的事情，但是不了解整个业务逻辑。虽然做的事，是很完整的前端，从 node 到 h5 到小程序出口。

数据资产平台的开发，让我了解到整个数据链路，数据上报到 tdbank，等等中间的流程
