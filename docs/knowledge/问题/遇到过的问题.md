---
title: 技术驱动
date: 2020-11-21
aside: false
draft: true
---

### 遇到过的问题

- 工作过程中遇到什么难题，是怎么解决的？
- 在 Vue 中使用 localStorage 的时候， computed 不能够触发 getter 的重新计算，如何解决的。 通过自定义事件。

- vue 项目中搜索高亮，通过正则表达式拼接标签高亮，再通过 v-html 显示，能够高亮，但是会带来跨站攻击 ？需要手动过滤 script 标签等
- v-html 你的站点上动态渲染的任意 HTML 可能会非常危险，因为它很容易导致 XSS 攻击。请只对可信内容使用 HTML 插值，绝不要对用户提供的内容插值。
- 你项目中如何进行用户输入过滤的？都过滤了那些内容？(根据回答有了下一个问题)
- 为什么没有过滤<img>标签？
- vue 项目目录 assets 和 static 的区别
  assets 里面的会被 webpack 打包进你的代码里，而 static 里面的，就直接引用了。一般在 static 里面放一些类库的文件，在 assets 里面放属于该项目的资源文件。如上面所说的 reset.css 会放在 static 文件夹中比较好

##### 正则匹配中文出错

背景：如何使用正则判断字符串中是否全部是中文？
通过百度或者 google 之后得到的答案一般都是：

```
const reg = /^[\u4e00-\u9fa5]*$/
reg.test('中文')
```

但是实际上遇到了一个中文 "䃼" 的时候，正则就返回了错误。 一开始没有意识到这是一个不常见的中文，或者换句话说没有意识到不常见的中文没有落在上面的正则表达式里。在线中文转化 unicode 之后得到这个字的 unicode 编码是 "\u40fc", 看起来确实没有落在上面正则的范围里。补上一般完整的中文编码符号。https://blog.bvcode.com/res/159/

##### 在 created 钩子中直接使用了 await (没有同步执行。。。) 生命周期是一个队列， 生命周期钩子内的异步请求又是一个队列。 async 表示 created 钩子中的函数会同步执行，而并非是先执行完 created 钩子之后再执行 mounted。

### 在 Vue 中使用 localStorage 的时候， computed 不能够触发 getter 的重新计算，如何解决的。 通过自定义事件

### ios 的禁止回弹效果

整个页面的禁止回弹效果处理；
对于页面中的某一个模块的回调效果取消处理

### 驾驶舱的顶部 Tab 渲染同 ID 的 Item 的顺序错乱现象

对于一个 Tab 组件，传入的一个元素是 Tab 对象的数组，渲染一个 Tabs 列表。 数据举例如下：

```js
const A = [0, 1, 2, 3];

const B = [0, 1, 2];
```

对于 A B 两个数组， 最后一个元素的 Id 相等，前面的 Id 都不同。在切换 Tabs 的过程中，就是替换 A B 数组的值。但是每次切换的过程中，最后一个 Tab 位置总是会跑到第一位（首次渲染的位置相同。）， 后来想了一下这个原因是因为 Vue 在增加删除节点的时候，相同的 Key 的元素，就当做旧元素，已经消失的 Key 元素，节点会被删除；而原本不存在的节点，会被作为新 Key 插入到后面。 这就是为什么，最后一个 Tab 元素在切换过程中跑到最前面去的原因，这里只要改一下，用不同的 Key 值即可。

### 小程序

小程序内嵌 h5 ，可视化， 计算数据等等，性能成问题，现在 pc 上进行内存检查，在手机上查看占用的内存等等
。

### 页面跳转之前的请求没有结束，会被 cancel

https://segmentfault.com/a/1190000013132078

日志上报的失败率比较高，很多都是直接被 cancel (abort) 调的。

使用 `navigator.sendBeacon` 打点上报有一个好处， 对于页面直接跳转的情况，也能上报数据，而不会被 cancel。 所以 navigator.sendBeacon 的部分，其实并不需要 await 它，正常写同步的顺序就好。
