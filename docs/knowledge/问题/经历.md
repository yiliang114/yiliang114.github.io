---
title: 技术驱动
date: 2020-11-21
aside: false
draft: true
---

## vue 生态相关

- generateVuex
  - 自动写入的 setMutations
  - 状态机
- vbx
- omiv 的实现
  - 111
- omi 的原理与实现
- 异步加载 table
- 海量数据的虚拟列表
  - https://www.jianshu.com/p/15cc08ec366a
  - https://juejin.im/post/5ae17a386fb9a07abc299cdd
- 图片懒加载原理

## 性能优化

- 懒加载
  - 路由
  - 图片
  - 区块，请求 （与图片类似）
- code split
  - 按需加载
  - ant d 的 icon 拆分

## CI 持续集成

- ars 平台
- qci + ars
- 蓝盾 + ars
- oci

规范： git commit, 分支, 单元测试, 发布等

## 组件库

- 腾讯云风格的业务组件库
- 包装 ant d 的业务组件库
  - 组件直接显示在文档上的模块
  - webpack 自动 loader ？
- 内部开源 TDesign

## 高管驾驶舱

- vue
- 可视化
- echart
- 通过 json 配置文件生成目录结构
- 小程序 + webview

问题：

## 行业经分平台

- 权限
- BFF 层
  - 网关
  - 业务层

## 监控平台 ？

https://blog.csdn.net/qq_34035425/article/details/84962847

sentry 部分原理： https://zhuanlan.zhihu.com/p/75577689
gif: https://mp.weixin.qq.com/s/v6R2w26qZkEilXY0mPUBCw?utm_medium=hao.caibaojian.com&utm_source=hao.caibaojian.com

一个监控关注的内容：

- performance
  - 首屏
  - dns 时间等
- js 异常
  - ???
- console.error 异常
  - 重载 console.error
- ajax 异常
  - 重写原生 ajax
- 普通信息上报
  - 普通上报携带一个 type

如何上报：

- img 标签
- axios 发送请求
- 页面关闭丢数据的问题， 有一个新的 api

特别之处：

- 实现小程序的打点上报
  - 首屏 两个周期时间
- wx.request 与 img 标签

### 关于时间计算

html5 新增的接口 performance

#### 白屏时间

## 门户

- 微前端 ？

## 问题

## cdata

- 平台整个工作链路
- 介绍高管驾驶舱

### 前端开发、发布流程

1. 用组里老的脚手架工具，或者 vue-cli@3 创建一个架子，加上测试的路由，引入依赖库，加入 oci 的配置文件等
2.

### Node

1. bff
2. 一些工具类的库
   1. 举个例子就是有些逻辑在前端做也可以，在后台做也可以，把数据吐回来的时候的清洗和处理，抽成 npm 包
3. 工具类的内部网站

### OTeam

#### Tdesign 组件库

说明白 table

#### 前端监控

背景是什么，为什么要做，期望的成果如何，现在做到什么阶段了，遇到过什么问题？

performance.timing.navigationStart 表示一个开始时间。
白屏时间的计算，是从开始加载到底部的 script 标签都执行结束之后的整个过程。
用户可操作性时间，是 DOMContentLoaded 事件执行结束之后。
下载总时间： onload 事件执行之后

##### 指标

- js error
- console.error
- ajax
- promise err catch: unhandrejection ?
- 统计打点的时间

##### 上报方式

- img gif 有很多优点
  - 跨域
  - 不会阻塞页面
  - 所有图片中的体积最小
- axios 上报也有的
- 新 api navigator.beacon 能够在页面关闭之前在请求执行完毕，降低打点的丢失率

##### 优化

- 效率： 合并打点。 搞一个简单的数组

##### 特殊场景

1. 语义对话过程，全链路都是 200 正常，但是语义测返回的内容不符合要求，也算是异常
2. 老板打开页面的时候，需要实时监控。

### feature-flag

版本发布灰度

### vue 指令打点上报

1. PV/UV
2. 点击事件 声明式上报 （很多节点注册事件的性能问题， 如何使用代理形式 ？）
3. 主动上报 耦合进业务逻辑

曝光和打点，全部通过指令来完成，尽可能与业务逻辑进行解耦，抽成组件的形式

https://www.cnblogs.com/xumengxuan/p/10682338.html
https://www.cnblogs.com/huiwenhua/p/13368415.html

https://hughfenghen.github.io/fe/vue-directive-track.html#%E4%BC%A0%E7%BB%9F%E5%9F%8B%E7%82%B9-vs-%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%9F%8B%E7%82%B9

上报的几种分类型是：

https://www.cnblogs.com/xumengxuan/p/10682338.html

https://hughfenghen.github.io/fe/vue-directive-track.html#%E5%8F%AF%E5%8F%82%E8%80%83%E7%9A%84%E6%8C%87%E4%BB%A4%E6%BA%90%E7%A0%81

#### 问题点

binding.value 不是响应式的
