---
title: 技术驱动
date: 2020-11-21
aside: false
---

### 实现

- Vue 骨架屏如何实现
- 说一说 vue 的 ssr ， 源码中是如何体现的？
- vuex 插件 generate-vuex ？
- emonitor 数据上报和实现原理
- qcmagic 的思想
- 架构上的思考：一个完善的前端框架，一般需要具备以下的几个功能：
  - 数据上报， 日志埋点， pv
  - 错误告警、上报
  - 合理的日志系统，不同的级别日志
- qcvue
- 短域名服务
- 特性开关实现
- vue 搜索关键词高亮
- 实现自动保存功能的时候会遇到什么问题

* 保存登录态，如何设计。
* oauth2 sso 单点登录原理和设计说明

* 轮询延迟接口查询
  这里很重要的一点是，一个 promise 执行完毕之后，如果没有 resolve 或者 rejected 结果的话，这个 promise 就不会返回任何东西，也就是说 await 或者 then 都获取不到结果。就算在执行期间重新又 new Promise 了，但那是一个新的 Promise，对于之前的 那个 promise 来说，正确的轮询接口返回结果传递的方式应该是将执行期间的 new Promise 的结果由第一个 promise resolve 出去。 就像这里的 `resolve(await sleepHandle(async () => await pollCheck(TaskRequestId)))`, await 的结果是一个有结果， 也就是说，最后 pollCheck 函数能够得到结果。

  ```js
  // 递归轮训函数
  export function pollCheck(TaskRequestId) {
    // Vue.prototype.$tip.loading({
    //   msg: 'loading...',
    //   duration: 0
    // })
    return new Promise((resolve, reject) => {
      queryTaskStatus(TaskRequestId).then(async resp => {
        const Status = (resp && resp.Response && resp.Response.Status) || 0;
        if (Status === 0) {
          console.log('pollCheck...');
          // 这里也需要 resolve 一个 promise
          resolve(await sleepHandle(async () => await pollCheck(TaskRequestId)));
        } else {
          console.log('resp', resp);
          resolve(resp);
        }
      });
    });
  }
  ```

```js
// 保证 setTimeout 能够同步执行
function sleepHandle(fn, time) {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve(fn());
    }, time || 500);
  });
}
```

- 如何实现网页下滑导航栏背景变化？
  https://www.zhihu.com/question/67840027
  https://blog.csdn.net/qq_21891743/article/details/78932306
  网页 下滑 导航栏 改变

- 国外高清图片分享网站
  https://www.pexels.com/search/engine/
  这个图片加载的速度也太快了吧。。。。

- vuex 和 redux 的状态机
  在页面进行切换的时候，如果上一个页面已经进行过数据拉取，如果有 一个 status 表示拉取状态的话，就能够减少接口的重复拉取。

- 微医 vue ssr 实战
  https://wy.guahao.com/

- 使用 Fetch 的状态机能够防止 react 的过度重绘？ 只在数据加载完成之后再绘制全部的页面；可以防止接口重复拉取，在 Fetching 的状态，不再出发 fetch 事件；

- contenteditable 光标跳动问题
  https://www.cnblogs.com/lvyueyang/p/9554416.html

- ai-skill-mall h5 页面调试
  多次点击出现 openid

### 杂

- 直播点赞按钮的冒泡功能如何实现
- 如何写一个无刷新的网站，并且能在浏览器前进、后退时正确响应。
- 一步生成 https 的网址 [mkcert](https://github.com/FiloSottile/mkcert), 感觉可以使用 node 做一个？ 需要了解 https

### vue

1. 路由跳转前弹框。没有 vue router 的守卫函数的情况下如何处理？seajs 的路由处理方式。
2. vue 项目开发环境和生产环境的 bundle js 优化，以及如何对于线上环境打开 vue devtool 查看参数。如何在上线时使用 cdn 在开发环境又默认使用 install
3. 如何判断一个大表单有没有进行修改数据？ 是否弹框提醒

### 实现自动伸长的 textarea
