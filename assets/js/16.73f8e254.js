(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{459:function(a,e,t){"use strict";t.r(e);var s=t(3),r=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"ubuntu-安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-安装-docker"}},[a._v("#")]),a._v(" ubuntu 安装 docker")]),a._v(" "),e("h2",{attrs:{id:"ubuntu-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-docker"}},[a._v("#")]),a._v(" ubuntu docker")]),a._v(" "),e("h3",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo apt-get update\nsudo apt-get install docker.io\n// 启动docker后台服务\nsudo service docker start\n")])])]),e("h3",{attrs:{id:"镜像加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速"}},[a._v("#")]),a._v(" 镜像加速")]),a._v(" "),e("p",[a._v("由于国内直接访问 docker hub 网速比较慢，拉取镜像的时间就会比较长。所以一般我们都会使用镜像加速或者直接从国内的一些平台镜像仓库上拉取。")]),a._v(" "),e("p",[a._v("推荐使用一下两个镜像市场：")]),a._v(" "),e("ul",[e("li",[a._v("网易镜像中心："),e("a",{attrs:{href:"https://c.163.com/hub#/m/home/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://c.163.com/hub#/m/home/"),e("OutboundLink")],1)]),a._v(" "),e("li",[a._v("daocloud 镜像市场："),e("a",{attrs:{href:"https://hub.daocloud.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://hub.daocloud.io/"),e("OutboundLink")],1)])]),a._v(" "),e("p",[a._v("查看自己的镜像：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" sudo docker images\n")])])]),e("p",[a._v("拉取镜像：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("sudo docker pull 镜像名字\n// 例如：\nsudo docker pull hub.c.163.com/library/tomcat:latest\nsudo docker pull hub.c.163.com/library/mysql:5.7\nsudo docker pull hub.c.163.com/nce2/nodejs:0.12.2\nsudo docker pull jenkins:latest\nsudo docker pull hub.c.163.com/library/nginx:latest\n")])])]),e("p",[a._v("与前端相关的镜像基本都在上面了，有需要再补充。我希望使用"),e("code",[a._v("docker")]),a._v(" + "),e("code",[a._v("Jenkins")]),a._v(" + "),e("code",[a._v("nodejs")]),a._v(" + "),e("code",[a._v("mysql")])]),a._v(" "),e("p",[a._v("能够自动化部署 nodejs，当然了对于前端 build 之后的静态页面来说，部署应该是相对容易的， 直接使用 nginx 就可以了。")]),a._v(" "),e("h3",{attrs:{id:"docker-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-命令"}},[a._v("#")]),a._v(" docker 命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("// 退出容器 ？ 关闭服务 ？\nctrl + D\n")])])]),e("h2",{attrs:{id:"docker-与-vue、react"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-与-vue、react"}},[a._v("#")]),a._v(" docker 与 vue、react")]),a._v(" "),e("h2",{attrs:{id:"docker-与-node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-与-node"}},[a._v("#")]),a._v(" docker 与 node")]),a._v(" "),e("p",[a._v("在 docker 的 container 中运行 nodejs 程序。")]),a._v(" "),e("h2",{attrs:{id:"todo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[a._v("#")]),a._v(" todo")]),a._v(" "),e("p",[a._v("https://www.one-tab.com/page/-g13AchdQwOF-3vFuDKi2g")]),a._v(" "),e("h2",{attrs:{id:"window-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#window-docker"}},[a._v("#")]),a._v(" window docker")]),a._v(" "),e("p",[a._v("安装好之后，尝试 pull 一个 ubuntu 系统玩一玩。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker pull daocloud.io/ubuntu\n")])])]),e("h4",{attrs:{id:"window-docker-报错"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#window-docker-报错"}},[a._v("#")]),a._v(" window docker 报错")]),a._v(" "),e("h5",{attrs:{id:"docker-提示-image-operating-system-linux-cannot-be-used-on-this-platform"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-提示-image-operating-system-linux-cannot-be-used-on-this-platform"}},[a._v("#")]),a._v(' docker 提示 image operating system "linux" cannot be used on this platform')]),a._v(" "),e("p",[a._v("在 window 右下角的 docker 图标右键选择 "),e("code",[a._v("Switch between Windows and Linux containers")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("Switch between Windows and Linux containers\nYou can select which daemon (Linux or Windows) the Docker CLI talks to. Select Switch to Windows containers to toggle to Windows containers. Select Switch to Linux containers.\n")])])]),e("p",[a._v("注意 前缀带的 "),e("code",[a._v("daocloud.io")]),a._v(" 是国内的一个镜像。")]),a._v(" "),e("p",[e("code",[a._v("pull")]),a._v(" 结束之后，"),e("code",[a._v("docker images")]),a._v(" 查看本地目前的所有镜像。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ docker images\nREPOSITORY           TAG                 IMAGE ID            CREATED             SIZE\ndaocloud.io/ubuntu   latest              735f80812f90        4 days ago          83.5MB\n\n")])])]),e("p",[a._v("可以看到上面已经有一个 ubuntu 系统下载完成了。接着用这个 ubuntu 镜像创建容器：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("winpty  docker run -it --name mrj-ubuntu daocloud.io/ubuntu bash\n")])])]),e("p",[a._v("另外打开一个终端，查看 docker 运行的进程：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('$ docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED              STATUS              PORTS               NAMES\nbb8d80fad0ca        daocloud.io/ubuntu   "bash"              About a minute ago   Up About a minute\n')])])]),e("p",[a._v("退出容器：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("exit\n")])])]),e("p",[a._v("再次运行容器：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker start mrj-ubuntu\n// 然后使用winpty 进入容器\nwinpty docker attach mrj-ubuntu\n")])])]),e("h3",{attrs:{id:"win10-docker-换源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#win10-docker-换源"}},[a._v("#")]),a._v(" win10 docker 换源")]),a._v(" "),e("p",[a._v("https://blog.csdn.net/my__holiday/article/details/79111397")]),a._v(" "),e("h3",{attrs:{id:"docker-nginx-部署示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-nginx-部署示例"}},[a._v("#")]),a._v(" docker nginx 部署示例")]),a._v(" "),e("p",[a._v("创建映射端口为 80 的交互式界面：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run -p 80 --name web -i -t ubuntu /bin/bash\n")])])]),e("h4",{attrs:{id:"todo-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo-2"}},[a._v("#")]),a._v(" todo")]),a._v(" "),e("p",[e("code",[a._v("/bin/bash")]),a._v(" 这个是什么意思")]),a._v(" "),e("p",[a._v("第一次使用更新源")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("apt-get update\n")])])]),e("p",[a._v("apt-get 换源")]),a._v(" "),e("p",[a._v("https://www.cnblogs.com/gabin/p/6519352.html")]),a._v(" "),e("p",[a._v("安装 nginx")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("apt-get install nginx\n")])])]),e("p",[a._v("安装 vim")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("apt-get install vim\n")])])]),e("p",[a._v("whereis nginx")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("nginx: /usr/sbin/nginx /etc/nginx /usr/share/nginx\n")])])]),e("h4",{attrs:{id:"dockerfile-的使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-的使用"}},[a._v("#")]),a._v(" dockerfile 的使用")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('FROM ubuntu:14.04\nMAINTAINER yiliang 1204183885@qq.com\nRUN apt-get update\nRUN apt-get install -y nginx\nCOPY ./www/user/share/nginx/html\nEXPOSE 80\nCMD ["nginx","-g","daemon off;"]\n')])])]),e("p",[a._v("docker 构建运行")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('docker build -t="yiliang/nginx-demo 0.0.1"\n')])])]),e("h3",{attrs:{id:"删除多个-images"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除多个-images"}},[a._v("#")]),a._v(" 删除多个 images")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker rmi -f $(docker ps -a -q)\n\ndocker rmi -f $(docker images -a -q)\n")])])]),e("p",[a._v("https://yeasy.gitbooks.io/docker_practice/image/pull.html")]),a._v(" "),e("h4",{attrs:{id:"删除-docker-中没有使用的镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除-docker-中没有使用的镜像"}},[a._v("#")]),a._v(" 删除 docker 中没有使用的镜像")]),a._v(" "),e("p",[a._v("使用 "),e("code",[a._v("docker ps -a")]),a._v(" 命令查看 Docker 主机上包含停止的容器在内的所有容器。你可能会对存在这么多容器感到惊讶，尤其是在开发环境。停止状态的容器的可写层仍然占用磁盘空间。要清理掉这些，可以使用 "),e("code",[a._v("docker container prune")]),a._v(" 命令:")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker container prune\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ docker container prune\n\nWARNING! This will remove all stopped containers.\nAre you sure you want to continue? [y/N] y\n")])])]),e("p",[a._v("默认情况下，系统会提示是否继续。要绕过提示，请使用 "),e("code",[a._v("-f")]),a._v(" 或 "),e("code",[a._v("--force")]),a._v(" 标志。")])])}),[],!1,null,null,null);e.default=r.exports}}]);