(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{490:function(s,t,e){"use strict";e.r(t);var a=e(3),v=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"vue-项目部署找不到-js-css-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-项目部署找不到-js-css-文件"}},[s._v("#")]),s._v(" vue 项目部署找不到 js css 文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://chatflow-files-cdn-1252847684.file.myqcloud.com/20190105154109600.png",alt:""}}),s._v("\n很多时候 "),t("code",[s._v("npm run build")]),s._v(" 之后， "),t("code",[s._v("index.html")]),s._v(" 文件中 webpack 自动插入的 js 文件 css 文件的相对目录总是不对，发布到服务器上之后，nginx 找不到文件。")]),s._v(" "),t("h4",{attrs:{id:"vue-cli-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-3"}},[s._v("#")]),s._v(" vue-cli@3")]),s._v(" "),t("p",[s._v("在 vue-cli@3 中你需要为你 webpack 插入到 "),t("code",[s._v("index.html")]),s._v(" 中 的所有文件添加一个 "),t("code",[s._v("baseUrl")]),s._v(". 你需要在项目的根目录新建一个 "),t("code",[s._v("vue.config.js")]),s._v(", 添加如下内容：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("baseUrl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" isProd\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/baseXXX/'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("这里需要注意的是 dev 环境下不需要添加 "),t("code",[s._v("baseUrl")]),s._v(" 。")]),s._v(" "),t("h4",{attrs:{id:"vue-cli-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-2"}},[s._v("#")]),s._v(" vue-cli@2")]),s._v(" "),t("p",[s._v("针对 非 vue-cli@3 生成的项目，你如果不关心 webpack 里面是如何实现的，你只需要找到 "),t("code",[s._v("config/index.js")]),s._v(" ， 修改其中的 "),t("code",[s._v("build")]),s._v(" 中的 "),t("code",[s._v("assetsPublicPath")]),s._v(" 即可。")]),s._v(" "),t("p",[s._v("为了验证一下是否可行，你可以本地 build 一下，然后查看 "),t("code",[s._v("dist/index.html")]),s._v(" 中引用的 js css 文件的路径是否携带上你刚刚设置的 "),t("code",[s._v("assetsPublicPath")]),s._v(" 即可。")]),s._v(" "),t("p",[s._v("而关心为啥这样设置就可以的同学们，继续看 "),t("code",[s._v("build/webpack.base.conf.js")]),s._v(" 文件，\n"),t("img",{attrs:{src:"https://chatflow-files-cdn-1252847684.file.myqcloud.com/20190105153832561.png",alt:""}})]),s._v(" "),t("p",[s._v("非 "),t("code",[s._v("production")]),s._v(" mode 下，是在"),t("code",[s._v("config/index.js")]),s._v(" 中设置的，这里的 "),t("code",[s._v("publicPath")]),s._v(" 默认是\n"),t("img",{attrs:{src:"https://chatflow-files-cdn-1252847684.file.myqcloud.com/20190105153930278.png",alt:""}})])])}),[],!1,null,null,null);t.default=v.exports}}]);